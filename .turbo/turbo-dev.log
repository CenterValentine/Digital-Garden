
> web@0.1.0 dev /Users/davidvalentine/Documents/Digital-Garden/apps/web
> next dev

   ▲ Next.js 16.0.8 (Turbopack)
   - Local:         http://localhost:3000
   - Network:       http://192.168.0.94:3000
   - Environments: .env.local

 ✓ Starting...
 ✓ Ready in 465ms
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."token", "public"."Session"."expiresAt", "public"."Session"."createdAt" FROM "public"."Session" WHERE ("public"."Session"."token" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."username", "public"."User"."email", "public"."User"."role"::text FROM "public"."User" WHERE "public"."User"."id" = $1 OFFSET $2
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."token", "public"."Session"."expiresAt", "public"."Session"."createdAt" FROM "public"."Session" WHERE ("public"."Session"."token" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."username", "public"."User"."email", "public"."User"."role"::text FROM "public"."User" WHERE "public"."User"."id" = $1 OFFSET $2
prisma:query SELECT "public"."Category"."id", "public"."Category"."name", "public"."Category"."slug", "public"."Category"."description", "public"."Category"."ownerId", "public"."Category"."displayOrder", "public"."Category"."isPublished", "public"."Category"."createdAt", "public"."Category"."updatedAt" FROM "public"."Category" WHERE ("public"."Category"."isPublished" = $1 AND "public"."Category"."ownerId" = $2) ORDER BY "public"."Category"."displayOrder" ASC, "public"."Category"."id" ASC OFFSET $3
prisma:query SELECT "public"."ContentNode"."id", "public"."ContentNode"."ownerId", "public"."ContentNode"."title", "public"."ContentNode"."slug", "public"."ContentNode"."parentId", "public"."ContentNode"."displayOrder", "public"."ContentNode"."categoryId", "public"."ContentNode"."isPublished", "public"."ContentNode"."createdAt", "public"."ContentNode"."updatedAt", "public"."ContentNode"."deletedAt", "public"."ContentNode"."deletedBy", "public"."ContentNode"."customIcon", "public"."ContentNode"."iconColor" FROM "public"."ContentNode" WHERE (("public"."ContentNode"."isPublished" = $1 AND "public"."ContentNode"."deletedAt" IS NULL) AND "public"."ContentNode"."categoryId" IN (NULL)) ORDER BY "public"."ContentNode"."displayOrder" ASC, "public"."ContentNode"."id" ASC OFFSET $2
 GET / 200 in 3.6s (compile: 1240ms, render: 2.4s)
 GET /site.webmanifest 404 in 991ms (compile: 853ms, render: 138ms)
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."token", "public"."Session"."expiresAt", "public"."Session"."createdAt" FROM "public"."Session" WHERE ("public"."Session"."token" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."username", "public"."User"."email", "public"."User"."role"::text FROM "public"."User" WHERE "public"."User"."id" = $1 OFFSET $2
 GET /api/auth/session 200 in 747ms (compile: 622ms, render: 125ms)
 GET /notes 200 in 1947ms (compile: 1602ms, render: 344ms)
 GET /site.webmanifest 404 in 71ms (compile: 4ms, render: 67ms)
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."token", "public"."Session"."expiresAt", "public"."Session"."createdAt" FROM "public"."Session" WHERE ("public"."Session"."token" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."username", "public"."User"."email", "public"."User"."role"::text FROM "public"."User" WHERE "public"."User"."id" = $1 OFFSET $2
 GET /api/auth/session 200 in 126ms (compile: 1554µs, render: 124ms)
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."token", "public"."Session"."expiresAt", "public"."Session"."createdAt" FROM "public"."Session" WHERE ("public"."Session"."token" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."username", "public"."User"."email", "public"."User"."role"::text FROM "public"."User" WHERE "public"."User"."id" = $1 OFFSET $2
 GET /api/auth/session 200 in 327ms (compile: 1692µs, render: 326ms)
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."token", "public"."Session"."expiresAt", "public"."Session"."createdAt" FROM "public"."Session" WHERE ("public"."Session"."token" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."username", "public"."User"."email", "public"."User"."role"::text FROM "public"."User" WHERE "public"."User"."id" = $1 OFFSET $2
prisma:query SELECT "public"."ContentNode"."id", "public"."ContentNode"."title", "public"."ContentNode"."slug", "public"."ContentNode"."parentId", "public"."ContentNode"."displayOrder", "public"."ContentNode"."customIcon", "public"."ContentNode"."iconColor", "public"."ContentNode"."isPublished", "public"."ContentNode"."createdAt", "public"."ContentNode"."updatedAt", "public"."ContentNode"."deletedAt" FROM "public"."ContentNode" WHERE ("public"."ContentNode"."ownerId" = $1 AND "public"."ContentNode"."deletedAt" IS NULL) OFFSET $2
prisma:query SELECT "public"."NotePayload"."contentId", "public"."NotePayload"."metadata" FROM "public"."NotePayload" WHERE "public"."NotePayload"."contentId" IN (NULL) OFFSET $1
prisma:query SELECT "public"."FilePayload"."contentId", "public"."FilePayload"."fileName", "public"."FilePayload"."mimeType", "public"."FilePayload"."fileSize", "public"."FilePayload"."uploadStatus"::text, "public"."FilePayload"."thumbnailUrl" FROM "public"."FilePayload" WHERE "public"."FilePayload"."contentId" IN (NULL) OFFSET $1
prisma:query SELECT "public"."HtmlPayload"."contentId", "public"."HtmlPayload"."isTemplate" FROM "public"."HtmlPayload" WHERE "public"."HtmlPayload"."contentId" IN (NULL) OFFSET $1
prisma:query SELECT "public"."CodePayload"."contentId", "public"."CodePayload"."language" FROM "public"."CodePayload" WHERE "public"."CodePayload"."contentId" IN (NULL) OFFSET $1
[Tree API] Raw database displayOrder values:
 GET /api/notes/content/tree 200 in 1283ms (compile: 363ms, render: 919ms)
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."token", "public"."Session"."expiresAt", "public"."Session"."createdAt" FROM "public"."Session" WHERE ("public"."Session"."token" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."username", "public"."User"."email", "public"."User"."role"::text FROM "public"."User" WHERE "public"."User"."id" = $1 OFFSET $2
prisma:query SELECT "public"."ContentNode"."id", "public"."ContentNode"."title", "public"."ContentNode"."slug", "public"."ContentNode"."parentId", "public"."ContentNode"."displayOrder", "public"."ContentNode"."customIcon", "public"."ContentNode"."iconColor", "public"."ContentNode"."isPublished", "public"."ContentNode"."createdAt", "public"."ContentNode"."updatedAt", "public"."ContentNode"."deletedAt" FROM "public"."ContentNode" WHERE ("public"."ContentNode"."ownerId" = $1 AND "public"."ContentNode"."deletedAt" IS NULL) OFFSET $2
prisma:query SELECT "public"."NotePayload"."contentId", "public"."NotePayload"."metadata" FROM "public"."NotePayload" WHERE "public"."NotePayload"."contentId" IN (NULL) OFFSET $1
prisma:query SELECT "public"."CodePayload"."contentId", "public"."CodePayload"."language" FROM "public"."CodePayload" WHERE "public"."CodePayload"."contentId" IN (NULL) OFFSET $1
prisma:query SELECT "public"."FilePayload"."contentId", "public"."FilePayload"."fileName", "public"."FilePayload"."mimeType", "public"."FilePayload"."fileSize", "public"."FilePayload"."uploadStatus"::text, "public"."FilePayload"."thumbnailUrl" FROM "public"."FilePayload" WHERE "public"."FilePayload"."contentId" IN (NULL) OFFSET $1
prisma:query SELECT "public"."HtmlPayload"."contentId", "public"."HtmlPayload"."isTemplate" FROM "public"."HtmlPayload" WHERE "public"."HtmlPayload"."contentId" IN (NULL) OFFSET $1
[Tree API] Raw database displayOrder values:
 GET /api/notes/content/tree 200 in 247ms (compile: 5ms, render: 242ms)
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."token", "public"."Session"."expiresAt", "public"."Session"."createdAt" FROM "public"."Session" WHERE ("public"."Session"."token" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."username", "public"."User"."email", "public"."User"."role"::text FROM "public"."User" WHERE "public"."User"."id" = $1 OFFSET $2
prisma:query SELECT "public"."ContentNode"."id", "public"."ContentNode"."title", "public"."ContentNode"."slug", "public"."ContentNode"."parentId", "public"."ContentNode"."displayOrder", "public"."ContentNode"."customIcon", "public"."ContentNode"."iconColor", "public"."ContentNode"."isPublished", "public"."ContentNode"."createdAt", "public"."ContentNode"."updatedAt", "public"."ContentNode"."deletedAt" FROM "public"."ContentNode" WHERE ("public"."ContentNode"."ownerId" = $1 AND "public"."ContentNode"."deletedAt" IS NULL) OFFSET $2
prisma:query SELECT "public"."CodePayload"."contentId", "public"."CodePayload"."language" FROM "public"."CodePayload" WHERE "public"."CodePayload"."contentId" IN (NULL) OFFSET $1
prisma:query SELECT "public"."FilePayload"."contentId", "public"."FilePayload"."fileName", "public"."FilePayload"."mimeType", "public"."FilePayload"."fileSize", "public"."FilePayload"."uploadStatus"::text, "public"."FilePayload"."thumbnailUrl" FROM "public"."FilePayload" WHERE "public"."FilePayload"."contentId" IN (NULL) OFFSET $1
prisma:query SELECT "public"."HtmlPayload"."contentId", "public"."HtmlPayload"."isTemplate" FROM "public"."HtmlPayload" WHERE "public"."HtmlPayload"."contentId" IN (NULL) OFFSET $1
prisma:query SELECT "public"."NotePayload"."contentId", "public"."NotePayload"."metadata" FROM "public"."NotePayload" WHERE "public"."NotePayload"."contentId" IN (NULL) OFFSET $1
[Tree API] Raw database displayOrder values:
 GET /api/notes/content/tree 200 in 222ms (compile: 1494µs, render: 221ms)
 GET / 200 in 33ms (compile: 3ms, render: 30ms)
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."token", "public"."Session"."expiresAt", "public"."Session"."createdAt" FROM "public"."Session" WHERE ("public"."Session"."token" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."username", "public"."User"."email", "public"."User"."role"::text FROM "public"."User" WHERE "public"."User"."id" = $1 OFFSET $2
prisma:query SELECT "public"."StorageProviderConfig"."id", "public"."StorageProviderConfig"."userId", "public"."StorageProviderConfig"."provider"::text, "public"."StorageProviderConfig"."isDefault", "public"."StorageProviderConfig"."displayName", "public"."StorageProviderConfig"."config", "public"."StorageProviderConfig"."isActive", "public"."StorageProviderConfig"."createdAt", "public"."StorageProviderConfig"."updatedAt" FROM "public"."StorageProviderConfig" WHERE ("public"."StorageProviderConfig"."userId" = $1 AND "public"."StorageProviderConfig"."provider" = CAST($2::text AS "public"."StorageProvider") AND "public"."StorageProviderConfig"."isActive" = $3) ORDER BY "public"."StorageProviderConfig"."isDefault" DESC LIMIT $4 OFFSET $5
[Upload] File: test-plaintext.txt, OCR: false, searchTextLength: 979
prisma:query SELECT "public"."FilePayload"."contentId", "public"."FilePayload"."fileName", "public"."FilePayload"."fileExtension", "public"."FilePayload"."mimeType", "public"."FilePayload"."fileSize", "public"."FilePayload"."checksum", "public"."FilePayload"."storageProvider"::text, "public"."FilePayload"."storageKey", "public"."FilePayload"."storageUrl", "public"."FilePayload"."storageMetadata", "public"."FilePayload"."uploadStatus"::text, "public"."FilePayload"."uploadedAt", "public"."FilePayload"."uploadError", "public"."FilePayload"."processingStatus", "public"."FilePayload"."isProcessed", "public"."FilePayload"."thumbnailUrl", "public"."FilePayload"."width", "public"."FilePayload"."height", "public"."FilePayload"."duration", "public"."FilePayload"."lastAccessedAt", "public"."FilePayload"."createdAt", "public"."FilePayload"."updatedAt", "public"."FilePayload"."searchText" FROM "public"."FilePayload" LEFT JOIN "public"."ContentNode" AS "j0" ON ("j0"."id") = ("public"."FilePayload"."contentId") WHERE ("public"."FilePayload"."checksum" = $1 AND "public"."FilePayload"."fileSize" = $2 AND ("j0"."ownerId" = $3 AND ("j0"."id" IS NOT NULL)) AND "public"."FilePayload"."uploadStatus" IN (CAST($4::text AS "public"."UploadStatus"),CAST($5::text AS "public"."UploadStatus"))) LIMIT $6 OFFSET $7
prisma:query SELECT "public"."ContentNode"."id", "public"."ContentNode"."ownerId", "public"."ContentNode"."title", "public"."ContentNode"."slug", "public"."ContentNode"."parentId", "public"."ContentNode"."displayOrder", "public"."ContentNode"."categoryId", "public"."ContentNode"."isPublished", "public"."ContentNode"."createdAt", "public"."ContentNode"."updatedAt", "public"."ContentNode"."deletedAt", "public"."ContentNode"."deletedBy", "public"."ContentNode"."customIcon", "public"."ContentNode"."iconColor" FROM "public"."ContentNode" WHERE "public"."ContentNode"."id" IN (NULL) OFFSET $1
prisma:query SELECT "public"."ContentNode"."id", "public"."ContentNode"."ownerId", "public"."ContentNode"."title", "public"."ContentNode"."slug", "public"."ContentNode"."parentId", "public"."ContentNode"."displayOrder", "public"."ContentNode"."categoryId", "public"."ContentNode"."isPublished", "public"."ContentNode"."createdAt", "public"."ContentNode"."updatedAt", "public"."ContentNode"."deletedAt", "public"."ContentNode"."deletedBy", "public"."ContentNode"."customIcon", "public"."ContentNode"."iconColor" FROM "public"."ContentNode" WHERE ("public"."ContentNode"."slug" = $1 AND "public"."ContentNode"."ownerId" = $2) LIMIT $3 OFFSET $4
prisma:query ROLLBACK
prisma:error 
Invalid `prisma.contentNode.create()` invocation:


Unique constraint failed on the fields: (`slug`)
[SimpleUpload] ERROR: Error [PrismaClientKnownRequestError]: 
Invalid `prisma.contentNode.create()` invocation:


Unique constraint failed on the fields: (`slug`)
    at qr.handleRequestError (lib/generated/prisma/runtime/client.js:69:8172)
    at qr.handleAndLogRequestError (lib/generated/prisma/runtime/client.js:69:7467)
    at qr.request (lib/generated/prisma/runtime/client.js:69:7174)
    at async a (lib/generated/prisma/runtime/client.js:79:5816)
    at async POST (app/api/notes/content/upload/simple/route.ts:146:19)
  67 |
  68 | More Information: https://pris.ly/d/execute-raw
> 69 | `)}var Xn=({clientMethod:e,activeProvider:t})=>r=>{let n="",i;if(ar(r))n=r.sql,i={values:Ge(r.values),__prismaRawParameters__:!0};else if(Array.isArray(r)){let[o,...s]=r;n=o,i={values:Ge(s||[]),__prismaRawParameters__:!0}}else switch(t){case"sqlite":case"mysql":{n=r.sql,i={values:Ge(r.values),__prismaRawParameters__:!0};break}case"cockroachdb":case"postgresql":case"postgres":{n=r.text,i={values:Ge(r.values),__prismaRawParameters__:!0};break}case"sqlserver":{n=Da(r),i={values:Ge(r.values),__prismaRawParameters__:!0};break}default:throw new Error(`The ${t} provider does not support ${e}`)}return i?.values?Va(`prisma.${e}(${n}, ${i.values})`):Va(`prisma.${e}(${n})`),{query:n,parameters:i}},ja={requestArgsToMiddlewareArgs(e){return[e.strings,...e.values]},middlewareArgsToRequestArgs(e){let[t,...r]=e;return new Ua.Sql(t,r)}},Ba={requestArgsToMiddlewareArgs(e){return[e]},middlewareArgsToRequestArgs(e){return e[0]}};function ei(e){return function(r,n){let i,o=(s=e)=>{try{return s===void 0||s?.kind==="itx"?i??=Qa(r(s)):Qa(r(s))}catch(a){return Promise.reject(a)}};return{get spec(){return n},then(s,a){return o().then(s,a)},catch(s){return o().catch(s)},finally(s){return o().finally(s)},requestTransaction(s){let a=o(s);return a.requestTransaction?a.requestTransaction(s):a},[Symbol.toStringTag]:"PrismaPromise"}}}function Qa(e){return typeof e.then=="function"?e:Promise.resolve(e)}var Ha={name:"@prisma/instrumentation-contract",version:"7.2.0",description:"Shared types and utilities for Prisma instrumentation",main:"dist/index.js",module:"dist/index.mjs",types:"dist/index.d.ts",exports:{".":{require:{types:"./dist/index.d.ts",default:"./dist/index.js"},import:{types:"./dist/index.d.mts",default:"./dist/index.mjs"}}},license:"Apache-2.0",homepage:"https://www.prisma.io",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/instrumentation-contract"},bugs:"https://github.com/prisma/prisma/issues",scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",prepublishOnly:"pnpm run build",test:"vitest run"},files:["dist"],sideEffects:!1,devDependencies:{"@opentelemetry/api":"1.9.0"},peerDependencies:{"@opentelemetry/api":"^1.8"}};var wd=Ha.version.split(".")[0],xd="PRISMA_INSTRUMENTATION",bd=`V${wd}_PRISMA_INSTRUMENTATION`,Ja=globalThis;function Wa(){let e=Ja[bd];return e?.helper?e.helper:Ja[xd]?.helper}var Ed={isEnabled(){return!1},getTraceParent(){return"00-10-10-00"},dispatchEngineSpans(){},getActiveContext(){},runInChildSpan(e,t){return t()}},ti=class{isEnabled(){return this.getTracingHelper().isEnabled()}getTraceParent(t){return this.getTracingHelper().getTraceParent(t)}dispatchEngineSpans(t){return this.getTracingHelper().dispatchEngineSpans(t)}getActiveContext(){return this.getTracingHelper().getActiveContext()}runInChildSpan(t,r){return this.getTracingHelper().runInChildSpan(t,r)}getTracingHelper(){return Wa()??Ed}};function Ga(){return new ti}function Ka(e,t=()=>{}){let r,n=new Promise(i=>r=i);return{then(i){return--e===0&&r(t()),i?.(n)}}}function za(e){return typeof e=="string"?e:e.reduce((t,r)=>{let n=typeof r=="string"?r:r.level;return n==="query"?t:t&&(r==="info"||t==="info")?"info":n},void 0)}var Xa=require("@prisma/client-runtime-utils");function Za(e){if(e.action!=="findUnique"&&e.action!=="findUniqueOrThrow")return;let t=[];return e.modelName&&t.push(e.modelName),e.query.arguments&&t.push(ri(e.query.arguments)),t.push(ri(e.query.selection)),t.join("")}function ri(e){return`(${Object.keys(e).sort().map(r=>{let n=e[r];return typeof n=="object"&&n!==null?`(${r} ${ri(n)})`:r}).join(" ")})`}var Td={aggregate:!1,aggregateRaw:!1,createMany:!0,createManyAndReturn:!0,createOne:!0,deleteMany:!0,deleteOne:!0,executeRaw:!0,findFirst:!1,findFirstOrThrow:!1,findMany:!1,findRaw:!1,findUnique:!1,findUniqueOrThrow:!1,groupBy:!1,queryRaw:!1,runCommandRaw:!0,updateMany:!0,updateManyAndReturn:!0,updateOne:!0,upsertOne:!0};function ni(e){return Td[e]}var Lr=class{constructor(t){this.options=t;this.batches={}}batches;tickActive=!1;request(t){let r=this.options.batchBy(t);return r?(this.batches[r]||(this.batches[r]=[],this.tickActive||(this.tickActive=!0,process.nextTick(()=>{this.dispatchBatches(),this.tickActive=!1}))),new Promise((n,i)=>{this.batches[r].push({request:t,resolve:n,reject:i})})):this.options.singleLoader(t)}dispatchBatches(){for(let t in this.batches){let r=this.batches[t];delete this.batches[t],r.length===1?this.options.singleLoader(r[0].request).then(n=>{n instanceof Error?r[0].reject(n):r[0].resolve(n)}).catch(n=>{r[0].reject(n)}):(r.sort((n,i)=>this.options.batchOrder(n.request,i.request)),this.options.batchLoader(r.map(n=>n.request)).then(n=>{if(n instanceof Error)for(let i=0;i<r.length;i++)r[i].reject(n);else for(let i=0;i<r.length;i++){let o=n[i];o instanceof Error?r[i].reject(o):r[i].resolve(o)}}).catch(n=>{for(let i=0;i<r.length;i++)r[i].reject(n)}))}}get[Symbol.toStringTag](){return"DataLoader"}};var Ya=require("@prisma/client-runtime-utils");function Te(e,t){if(t===null)return t;switch(e){case"bigint":return BigInt(t);case"bytes":{let{buffer:r,byteOffset:n,byteLength:i}=Buffer.from(t,"base64");return new Uint8Array(r,n,i)}case"decimal":return new Ya.Decimal(t);case"datetime":case"date":return new Date(t);case"time":return new Date(`1970-01-01T${t}Z`);case"bigint-array":return t.map(r=>Te("bigint",r));case"bytes-array":return t.map(r=>Te("bytes",r));case"decimal-array":return t.map(r=>Te("decimal",r));case"datetime-array":return t.map(r=>Te("datetime",r));case"date-array":return t.map(r=>Te("date",r));case"time-array":return t.map(r=>Te("time",r));default:return t}}function $r(e){let t=[],r=Pd(e);for(let n=0;n<e.rows.length;n++){let i=e.rows[n],o={...r};for(let s=0;s<i.length;s++)o[e.columns[s]]=Te(e.types[s],i[s]);t.push(o)}return t}function Pd(e){let t={};for(let r=0;r<e.columns.length;r++)t[e.columns[r]]=null;return t}var Ad=M("prisma:client:request_handler"),qr=class{client;dataloader;logEmitter;constructor(t,r){this.logEmitter=r,this.client=t,this.dataloader=new Lr({batchLoader:Vo(async({requests:n,customDataProxyFetch:i})=>{let{transaction:o,otelParentCtx:s}=n[0],a=n.map(p=>p.protocolQuery),l=this.client._tracingHelper.getTraceParent(s),c=n.some(p=>ni(p.protocolQuery.action));return(await this.client._engine.requestBatch(a,{traceparent:l,transaction:Sd(o),containsWrite:c,customDataProxyFetch:i})).map((p,y)=>{if(p instanceof Error)return p;try{return this.mapQueryEngineResult(n[y],p)}catch(h){return h}})}),singleLoader:async n=>{let i=n.transaction?.kind==="itx"?el(n.transaction):void 0,o=await this.client._engine.request(n.protocolQuery,{traceparent:this.client._tracingHelper.getTraceParent(),interactiveTransaction:i,isWrite:ni(n.protocolQuery.action),customDataProxyFetch:n.customDataProxyFetch});return this.mapQueryEngineResult(n,o)},batchBy:n=>n.transaction?.id?`transaction-${n.transaction.id}`:Za(n.protocolQuery),batchOrder(n,i){return n.transaction?.kind==="batch"&&i.transaction?.kind==="batch"?n.transaction.index-i.transaction.index:0}})}async request(t){try{return await this.dataloader.request(t)}catch(r){let{clientMethod:n,callsite:i,transaction:o,args:s,modelName:a}=t;this.handleAndLogRequestError({error:r,clientMethod:n,callsite:i,transaction:o,args:s,modelName:a,globalOmit:t.globalOmit})}}mapQueryEngineResult({dataPath:t,unpacker:r},n){let i=n?.data,o=this.unpack(i,t,r);return process.env.PRISMA_CLIENT_GET_TIME?{data:o}:o}handleAndLogRequestError(t){try{this.handleRequestError(t)}catch(r){throw this.logEmitter&&this.logEmitter.emit("error",{message:r.message,target:t.clientMethod,timestamp:new Date}),r}}handleRequestError({error:t,clientMethod:r,callsite:n,transaction:i,args:o,modelName:s,globalOmit:a}){if(Ad(t),vd(t,i))throw t;if(t instanceof w.PrismaClientKnownRequestError&&Cd(t)){let c=tl(t.meta);tr({args:o,errors:[c],callsite:n,errorFormat:this.client._errorFormat,originalMethod:r,clientVersion:this.client._clientVersion,globalOmit:a})}let l=t.message;if(n&&(l=Wt({callsite:n,originalMethod:r,isPanic:t.isPanic,showColors:this.client._errorFormat==="pretty",message:l})),l=this.sanitizeMessage(l),t.code){let c=s?{modelName:s,...t.meta}:t.meta;throw new w.PrismaClientKnownRequestError(l,{code:t.code,clientVersion:this.client._clientVersion,meta:c,batchRequestIdx:t.batchRequestIdx})}else{if(t.isPanic)throw new w.PrismaClientRustPanicError(l,this.client._clientVersion);if(t instanceof w.PrismaClientUnknownRequestError)throw new w.PrismaClientUnknownRequestError(l,{clientVersion:this.client._clientVersion,batchRequestIdx:t.batchRequestIdx});if(t instanceof w.PrismaClientInitializationError)throw new w.PrismaClientInitializationError(l,this.client._clientVersion);if(t instanceof w.PrismaClientRustPanicError)throw new w.PrismaClientRustPanicError(l,this.client._clientVersion)}throw t.clientVersion=this.client._clientVersion,t}sanitizeMessage(t){return this.client._errorFormat&&this.client._errorFormat!=="pretty"?Se(t):t}unpack(t,r,n){if(!t||(t.data&&(t=t.data),!t))return t;let i=Object.keys(t)[0],o=Object.values(t)[0],s=r.filter(c=>c!=="select"&&c!=="include"),a=un(o,s),l=i==="queryRaw"?$r(a):le(a);return n?n(l):l}get[Symbol.toStringTag](){return"RequestHandler"}};function Sd(e){if(e){if(e.kind==="batch")return{kind:"batch",options:{isolationLevel:e.isolationLevel}};if(e.kind==="itx")return{kind:"itx",options:el(e)};X(e,"Unknown transaction kind")}}function el(e){return{id:e.id,payload:e.payload}}function vd(e,t){return(0,Xa.hasBatchIndex)(e)&&t?.kind==="batch"&&e.batchRequestIdx!==t.index}function Cd(e){return e.code==="P2009"||e.code==="P2012"}function tl(e){if(e.kind==="Union")return{kind:"Union",errors:e.errors.map(tl)};if(Array.isArray(e.selectionPath)){let[,...t]=e.selectionPath;return{...e,selectionPath:t}}return e}var ii=Or;var sl=V(en());var v=class extends Error{constructor(t){super(t+`
     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ^
  70 | Read more at https://pris.ly/d/client-constructor`),this.name="PrismaClientConstructorValidationError"}get[Symbol.toStringTag](){return"PrismaClientConstructorValidationError"}};at(v,"PrismaClientConstructorValidationError");var rl=["errorFormat","adapter","accelerateUrl","log","transactionOptions","omit","comments","__internal"],nl=["pretty","colorless","minimal"],il=["info","query","warn","error"],Rd={adapter:()=>{},accelerateUrl:e=>{if(e!==void 0){if(typeof e!="string")throw new v(`Invalid value ${JSON.stringify(e)} for "accelerateUrl" provided to PrismaClient constructor.`);if(e.trim().length===0)throw new v('"accelerateUrl" provided to PrismaClient constructor must be a non-empty string.')}},errorFormat:e=>{if(e){if(typeof e!="string")throw new v(`Invalid value ${JSON.stringify(e)} for "errorFormat" provided to PrismaClient constructor.`);if(!nl.includes(e)){let t=Nt(e,nl);throw new v(`Invalid errorFormat ${e} provided to PrismaClient constructor.${t}`)}}},log:e=>{if(!e)return;if(!Array.isArray(e))throw new v(`Invalid value ${JSON.stringify(e)} for "log" provided to PrismaClient constructor.`);function t(r){if(typeof r=="string"&&!il.includes(r)){let n=Nt(r,il);throw new v(`Invalid log level "${r}" provided to PrismaClient constructor.${n}`)}}for(let r of e){t(r);let n={level:t,emit:i=>{let o=["stdout","event"];if(!o.includes(i)){let s=Nt(i,o);throw new v(`Invalid value ${JSON.stringify(i)} for "emit" in logLevel provided to PrismaClient constructor.${s}`)}}};if(r&&typeof r=="object")for(let[i,o]of Object.entries(r))if(n[i])n[i](o);else throw new v(`Invalid property ${i} for "log" provided to PrismaClient constructor`)}},transactionOptions:e=>{if(!e)return;let t=e.maxWait;if(t!=null&&t<=0)throw new v(`Invalid value ${t} for maxWait in "transactionOptions" provided to PrismaClient constructor. maxWait needs to be greater than 0`);let r=e.timeout;if(r!=null&&r<=0)throw new v(`Invalid value ${r} for timeout in "transactionOptions" provided to PrismaClient constructor. timeout needs to be greater than 0`)},omit:(e,t)=>{if(typeof e!="object")throw new v('"omit" option is expected to be an object.');if(e===null)throw new v('"omit" option can not be `null`');let r=[];for(let[n,i]of Object.entries(e)){let o=Id(n,t.runtimeDataModel);if(!o){r.push({kind:"UnknownModel",modelKey:n});continue}for(let[s,a]of Object.entries(i)){let l=o.fields.find(c=>c.name===s);if(!l){r.push({kind:"UnknownField",modelKey:n,fieldName:s});continue}if(l.relationName){r.push({kind:"RelationInOmit",modelKey:n,fieldName:s});continue}typeof a!="boolean"&&r.push({kind:"InvalidFieldValue",modelKey:n,fieldName:s})}}if(r.length>0)throw new v(Fd(e,r))},comments:e=>{if(e!==void 0){if(!Array.isArray(e))throw new v(`Invalid value ${JSON.stringify(e)} for "comments" provided to PrismaClient constructor. Expected an array of SQL commenter plugins.`);for(let t=0;t<e.length;t++)if(typeof e[t]!="function")throw new v(`Invalid value at index ${t} for "comments" provided to PrismaClient constructor. Each plugin must be a function.`)}},__internal:e=>{if(!e)return;let t=["debug","engine","configOverride"];if(typeof e!="object")throw new v(`Invalid value ${JSON.stringify(e)} for "__internal" to PrismaClient constructor`);for(let[r]of Object.entries(e))if(!t.includes(r)){let n=Nt(r,t);throw new v(`Invalid property ${JSON.stringify(r)} for "__internal" provided to PrismaClient constructor.${n}`)}}};function kd(e){let t=e.adapter!==void 0,r=e.accelerateUrl!==void 0;if(t&&r)throw new v('The "adapter" and "accelerateUrl" options are mutually exclusive. Please provide only one of them.');if(!t&&!r)throw new v('Using engine type "client" requires either "adapter" or "accelerateUrl" to be provided to PrismaClient constructor.')}function al(e,t){for(let[r,n]of Object.entries(e)){if(!rl.includes(r)){let i=Nt(r,rl);throw new v(`Unknown property ${r} provided to PrismaClient constructor.${i}`)}Rd[r](n,t)}kd(e)}function Nt(e,t){if(t.length===0||typeof e!="string")return"";let r=Od(e,t);return r?` Did you mean "${r}"?`:""}function Od(e,t){if(t.length===0)return null;let r=t.map(i=>({value:i,distance:(0,sl.default)(e,i)}));r.sort((i,o)=>i.distance<o.distance?-1:1);let n=r[0];return n.distance<3?n.value:null}function Id(e,t){return ol(t.models,e)??ol(t.types,e)}function ol(e,t){let r=Object.keys(e).find(n=>ie(n)===t);if(r)return e[r]}function Fd(e,t){let r=Ne(e);for(let o of t)switch(o.kind){case"UnknownModel":r.arguments.getField(o.modelKey)?.markAsError(),r.addErrorMessage(()=>`Unknown model name: ${o.modelKey}.`);break;case"UnknownField":r.arguments.getDeepField([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>`Model "${o.modelKey}" does not have a field named "${o.fieldName}".`);break;case"RelationInOmit":r.arguments.getDeepField([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>'Relations are already excluded by default and can not be specified in "omit".');break;case"InvalidFieldValue":r.arguments.getDeepFieldValue([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>"Omit field option value must be a boolean.");break}let{message:n,args:i}=er(r,"colorless");return`Error validating "omit" option:
  71 |
  72 | ${i} {
  code: 'P2002',
  meta: [Object],
  clientVersion: '7.2.0'
}
[SimpleUpload] Stack: PrismaClientKnownRequestError: 
Invalid `prisma.contentNode.create()` invocation:


Unique constraint failed on the fields: (`slug`)
    at qr.handleRequestError (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:6596:19)
    at qr.handleAndLogRequestError (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:6559:18)
    at qr.request (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:6540:18)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async a (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:7170:25)
    at async POST (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/apps_web_app_api_notes_content_upload_simple_route_ts_c48243fa._.js:151:27)
    at async AppRouteRouteModule.do (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:5:37789)
    at async AppRouteRouteModule.handle (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:5:45045)
    at async responseGenerator (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/d94bd_next_84d120ab._.js:15491:38)
    at async AppRouteRouteModule.handleResponse (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:1:187851)
    at async handleResponse (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/d94bd_next_84d120ab._.js:15553:32)
    at async handler (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/d94bd_next_84d120ab._.js:15606:13)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1413:9)
    at async DevServer.renderPageComponent (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1465:24)
    at async DevServer.renderToResponseImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1515:32)
    at async DevServer.pipeImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1021:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/next-server.js:394:17)
    at async DevServer.handleRequestImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:912:17)
    at async /Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/dev/next-dev-server.js:382:20
    at async Span.traceAsyncFn (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/trace/trace.js:157:20)
    at async DevServer.handleRequest (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/dev/next-dev-server.js:378:24)
    at async invokeRender (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/router-server.js:240:21)
    at async handleRequest (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/router-server.js:436:24)
    at async requestHandlerImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/router-server.js:484:13)
    at async Server.requestListener (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/start-server.js:226:13)
 POST /api/notes/content/upload/simple 500 in 2.1s (compile: 913ms, render: 1195ms)
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."token", "public"."Session"."expiresAt", "public"."Session"."createdAt" FROM "public"."Session" WHERE ("public"."Session"."token" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."username", "public"."User"."email", "public"."User"."role"::text FROM "public"."User" WHERE "public"."User"."id" = $1 OFFSET $2
prisma:query SELECT "public"."StorageProviderConfig"."id", "public"."StorageProviderConfig"."userId", "public"."StorageProviderConfig"."provider"::text, "public"."StorageProviderConfig"."isDefault", "public"."StorageProviderConfig"."displayName", "public"."StorageProviderConfig"."config", "public"."StorageProviderConfig"."isActive", "public"."StorageProviderConfig"."createdAt", "public"."StorageProviderConfig"."updatedAt" FROM "public"."StorageProviderConfig" WHERE ("public"."StorageProviderConfig"."userId" = $1 AND "public"."StorageProviderConfig"."provider" = CAST($2::text AS "public"."StorageProvider") AND "public"."StorageProviderConfig"."isActive" = $3) ORDER BY "public"."StorageProviderConfig"."isDefault" DESC LIMIT $4 OFFSET $5
[Upload] File: test-data.json, OCR: false, searchTextLength: 457
prisma:query SELECT "public"."FilePayload"."contentId", "public"."FilePayload"."fileName", "public"."FilePayload"."fileExtension", "public"."FilePayload"."mimeType", "public"."FilePayload"."fileSize", "public"."FilePayload"."checksum", "public"."FilePayload"."storageProvider"::text, "public"."FilePayload"."storageKey", "public"."FilePayload"."storageUrl", "public"."FilePayload"."storageMetadata", "public"."FilePayload"."uploadStatus"::text, "public"."FilePayload"."uploadedAt", "public"."FilePayload"."uploadError", "public"."FilePayload"."processingStatus", "public"."FilePayload"."isProcessed", "public"."FilePayload"."thumbnailUrl", "public"."FilePayload"."width", "public"."FilePayload"."height", "public"."FilePayload"."duration", "public"."FilePayload"."lastAccessedAt", "public"."FilePayload"."createdAt", "public"."FilePayload"."updatedAt", "public"."FilePayload"."searchText" FROM "public"."FilePayload" LEFT JOIN "public"."ContentNode" AS "j0" ON ("j0"."id") = ("public"."FilePayload"."contentId") WHERE ("public"."FilePayload"."checksum" = $1 AND "public"."FilePayload"."fileSize" = $2 AND ("j0"."ownerId" = $3 AND ("j0"."id" IS NOT NULL)) AND "public"."FilePayload"."uploadStatus" IN (CAST($4::text AS "public"."UploadStatus"),CAST($5::text AS "public"."UploadStatus"))) LIMIT $6 OFFSET $7
prisma:query SELECT "public"."ContentNode"."id", "public"."ContentNode"."ownerId", "public"."ContentNode"."title", "public"."ContentNode"."slug", "public"."ContentNode"."parentId", "public"."ContentNode"."displayOrder", "public"."ContentNode"."categoryId", "public"."ContentNode"."isPublished", "public"."ContentNode"."createdAt", "public"."ContentNode"."updatedAt", "public"."ContentNode"."deletedAt", "public"."ContentNode"."deletedBy", "public"."ContentNode"."customIcon", "public"."ContentNode"."iconColor" FROM "public"."ContentNode" WHERE "public"."ContentNode"."id" IN (NULL) OFFSET $1
prisma:query SELECT "public"."ContentNode"."id", "public"."ContentNode"."ownerId", "public"."ContentNode"."title", "public"."ContentNode"."slug", "public"."ContentNode"."parentId", "public"."ContentNode"."displayOrder", "public"."ContentNode"."categoryId", "public"."ContentNode"."isPublished", "public"."ContentNode"."createdAt", "public"."ContentNode"."updatedAt", "public"."ContentNode"."deletedAt", "public"."ContentNode"."deletedBy", "public"."ContentNode"."customIcon", "public"."ContentNode"."iconColor" FROM "public"."ContentNode" WHERE ("public"."ContentNode"."slug" = $1 AND "public"."ContentNode"."ownerId" = $2) LIMIT $3 OFFSET $4
prisma:query ROLLBACK
prisma:error 
Invalid `prisma.contentNode.create()` invocation:


Unique constraint failed on the fields: (`slug`)
[SimpleUpload] ERROR: Error [PrismaClientKnownRequestError]: 
Invalid `prisma.contentNode.create()` invocation:


Unique constraint failed on the fields: (`slug`)
    at qr.handleRequestError (lib/generated/prisma/runtime/client.js:69:8172)
    at qr.handleAndLogRequestError (lib/generated/prisma/runtime/client.js:69:7467)
    at qr.request (lib/generated/prisma/runtime/client.js:69:7174)
    at async a (lib/generated/prisma/runtime/client.js:79:5816)
    at async POST (app/api/notes/content/upload/simple/route.ts:146:19)
  67 |
  68 | More Information: https://pris.ly/d/execute-raw
> 69 | `)}var Xn=({clientMethod:e,activeProvider:t})=>r=>{let n="",i;if(ar(r))n=r.sql,i={values:Ge(r.values),__prismaRawParameters__:!0};else if(Array.isArray(r)){let[o,...s]=r;n=o,i={values:Ge(s||[]),__prismaRawParameters__:!0}}else switch(t){case"sqlite":case"mysql":{n=r.sql,i={values:Ge(r.values),__prismaRawParameters__:!0};break}case"cockroachdb":case"postgresql":case"postgres":{n=r.text,i={values:Ge(r.values),__prismaRawParameters__:!0};break}case"sqlserver":{n=Da(r),i={values:Ge(r.values),__prismaRawParameters__:!0};break}default:throw new Error(`The ${t} provider does not support ${e}`)}return i?.values?Va(`prisma.${e}(${n}, ${i.values})`):Va(`prisma.${e}(${n})`),{query:n,parameters:i}},ja={requestArgsToMiddlewareArgs(e){return[e.strings,...e.values]},middlewareArgsToRequestArgs(e){let[t,...r]=e;return new Ua.Sql(t,r)}},Ba={requestArgsToMiddlewareArgs(e){return[e]},middlewareArgsToRequestArgs(e){return e[0]}};function ei(e){return function(r,n){let i,o=(s=e)=>{try{return s===void 0||s?.kind==="itx"?i??=Qa(r(s)):Qa(r(s))}catch(a){return Promise.reject(a)}};return{get spec(){return n},then(s,a){return o().then(s,a)},catch(s){return o().catch(s)},finally(s){return o().finally(s)},requestTransaction(s){let a=o(s);return a.requestTransaction?a.requestTransaction(s):a},[Symbol.toStringTag]:"PrismaPromise"}}}function Qa(e){return typeof e.then=="function"?e:Promise.resolve(e)}var Ha={name:"@prisma/instrumentation-contract",version:"7.2.0",description:"Shared types and utilities for Prisma instrumentation",main:"dist/index.js",module:"dist/index.mjs",types:"dist/index.d.ts",exports:{".":{require:{types:"./dist/index.d.ts",default:"./dist/index.js"},import:{types:"./dist/index.d.mts",default:"./dist/index.mjs"}}},license:"Apache-2.0",homepage:"https://www.prisma.io",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/instrumentation-contract"},bugs:"https://github.com/prisma/prisma/issues",scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",prepublishOnly:"pnpm run build",test:"vitest run"},files:["dist"],sideEffects:!1,devDependencies:{"@opentelemetry/api":"1.9.0"},peerDependencies:{"@opentelemetry/api":"^1.8"}};var wd=Ha.version.split(".")[0],xd="PRISMA_INSTRUMENTATION",bd=`V${wd}_PRISMA_INSTRUMENTATION`,Ja=globalThis;function Wa(){let e=Ja[bd];return e?.helper?e.helper:Ja[xd]?.helper}var Ed={isEnabled(){return!1},getTraceParent(){return"00-10-10-00"},dispatchEngineSpans(){},getActiveContext(){},runInChildSpan(e,t){return t()}},ti=class{isEnabled(){return this.getTracingHelper().isEnabled()}getTraceParent(t){return this.getTracingHelper().getTraceParent(t)}dispatchEngineSpans(t){return this.getTracingHelper().dispatchEngineSpans(t)}getActiveContext(){return this.getTracingHelper().getActiveContext()}runInChildSpan(t,r){return this.getTracingHelper().runInChildSpan(t,r)}getTracingHelper(){return Wa()??Ed}};function Ga(){return new ti}function Ka(e,t=()=>{}){let r,n=new Promise(i=>r=i);return{then(i){return--e===0&&r(t()),i?.(n)}}}function za(e){return typeof e=="string"?e:e.reduce((t,r)=>{let n=typeof r=="string"?r:r.level;return n==="query"?t:t&&(r==="info"||t==="info")?"info":n},void 0)}var Xa=require("@prisma/client-runtime-utils");function Za(e){if(e.action!=="findUnique"&&e.action!=="findUniqueOrThrow")return;let t=[];return e.modelName&&t.push(e.modelName),e.query.arguments&&t.push(ri(e.query.arguments)),t.push(ri(e.query.selection)),t.join("")}function ri(e){return`(${Object.keys(e).sort().map(r=>{let n=e[r];return typeof n=="object"&&n!==null?`(${r} ${ri(n)})`:r}).join(" ")})`}var Td={aggregate:!1,aggregateRaw:!1,createMany:!0,createManyAndReturn:!0,createOne:!0,deleteMany:!0,deleteOne:!0,executeRaw:!0,findFirst:!1,findFirstOrThrow:!1,findMany:!1,findRaw:!1,findUnique:!1,findUniqueOrThrow:!1,groupBy:!1,queryRaw:!1,runCommandRaw:!0,updateMany:!0,updateManyAndReturn:!0,updateOne:!0,upsertOne:!0};function ni(e){return Td[e]}var Lr=class{constructor(t){this.options=t;this.batches={}}batches;tickActive=!1;request(t){let r=this.options.batchBy(t);return r?(this.batches[r]||(this.batches[r]=[],this.tickActive||(this.tickActive=!0,process.nextTick(()=>{this.dispatchBatches(),this.tickActive=!1}))),new Promise((n,i)=>{this.batches[r].push({request:t,resolve:n,reject:i})})):this.options.singleLoader(t)}dispatchBatches(){for(let t in this.batches){let r=this.batches[t];delete this.batches[t],r.length===1?this.options.singleLoader(r[0].request).then(n=>{n instanceof Error?r[0].reject(n):r[0].resolve(n)}).catch(n=>{r[0].reject(n)}):(r.sort((n,i)=>this.options.batchOrder(n.request,i.request)),this.options.batchLoader(r.map(n=>n.request)).then(n=>{if(n instanceof Error)for(let i=0;i<r.length;i++)r[i].reject(n);else for(let i=0;i<r.length;i++){let o=n[i];o instanceof Error?r[i].reject(o):r[i].resolve(o)}}).catch(n=>{for(let i=0;i<r.length;i++)r[i].reject(n)}))}}get[Symbol.toStringTag](){return"DataLoader"}};var Ya=require("@prisma/client-runtime-utils");function Te(e,t){if(t===null)return t;switch(e){case"bigint":return BigInt(t);case"bytes":{let{buffer:r,byteOffset:n,byteLength:i}=Buffer.from(t,"base64");return new Uint8Array(r,n,i)}case"decimal":return new Ya.Decimal(t);case"datetime":case"date":return new Date(t);case"time":return new Date(`1970-01-01T${t}Z`);case"bigint-array":return t.map(r=>Te("bigint",r));case"bytes-array":return t.map(r=>Te("bytes",r));case"decimal-array":return t.map(r=>Te("decimal",r));case"datetime-array":return t.map(r=>Te("datetime",r));case"date-array":return t.map(r=>Te("date",r));case"time-array":return t.map(r=>Te("time",r));default:return t}}function $r(e){let t=[],r=Pd(e);for(let n=0;n<e.rows.length;n++){let i=e.rows[n],o={...r};for(let s=0;s<i.length;s++)o[e.columns[s]]=Te(e.types[s],i[s]);t.push(o)}return t}function Pd(e){let t={};for(let r=0;r<e.columns.length;r++)t[e.columns[r]]=null;return t}var Ad=M("prisma:client:request_handler"),qr=class{client;dataloader;logEmitter;constructor(t,r){this.logEmitter=r,this.client=t,this.dataloader=new Lr({batchLoader:Vo(async({requests:n,customDataProxyFetch:i})=>{let{transaction:o,otelParentCtx:s}=n[0],a=n.map(p=>p.protocolQuery),l=this.client._tracingHelper.getTraceParent(s),c=n.some(p=>ni(p.protocolQuery.action));return(await this.client._engine.requestBatch(a,{traceparent:l,transaction:Sd(o),containsWrite:c,customDataProxyFetch:i})).map((p,y)=>{if(p instanceof Error)return p;try{return this.mapQueryEngineResult(n[y],p)}catch(h){return h}})}),singleLoader:async n=>{let i=n.transaction?.kind==="itx"?el(n.transaction):void 0,o=await this.client._engine.request(n.protocolQuery,{traceparent:this.client._tracingHelper.getTraceParent(),interactiveTransaction:i,isWrite:ni(n.protocolQuery.action),customDataProxyFetch:n.customDataProxyFetch});return this.mapQueryEngineResult(n,o)},batchBy:n=>n.transaction?.id?`transaction-${n.transaction.id}`:Za(n.protocolQuery),batchOrder(n,i){return n.transaction?.kind==="batch"&&i.transaction?.kind==="batch"?n.transaction.index-i.transaction.index:0}})}async request(t){try{return await this.dataloader.request(t)}catch(r){let{clientMethod:n,callsite:i,transaction:o,args:s,modelName:a}=t;this.handleAndLogRequestError({error:r,clientMethod:n,callsite:i,transaction:o,args:s,modelName:a,globalOmit:t.globalOmit})}}mapQueryEngineResult({dataPath:t,unpacker:r},n){let i=n?.data,o=this.unpack(i,t,r);return process.env.PRISMA_CLIENT_GET_TIME?{data:o}:o}handleAndLogRequestError(t){try{this.handleRequestError(t)}catch(r){throw this.logEmitter&&this.logEmitter.emit("error",{message:r.message,target:t.clientMethod,timestamp:new Date}),r}}handleRequestError({error:t,clientMethod:r,callsite:n,transaction:i,args:o,modelName:s,globalOmit:a}){if(Ad(t),vd(t,i))throw t;if(t instanceof w.PrismaClientKnownRequestError&&Cd(t)){let c=tl(t.meta);tr({args:o,errors:[c],callsite:n,errorFormat:this.client._errorFormat,originalMethod:r,clientVersion:this.client._clientVersion,globalOmit:a})}let l=t.message;if(n&&(l=Wt({callsite:n,originalMethod:r,isPanic:t.isPanic,showColors:this.client._errorFormat==="pretty",message:l})),l=this.sanitizeMessage(l),t.code){let c=s?{modelName:s,...t.meta}:t.meta;throw new w.PrismaClientKnownRequestError(l,{code:t.code,clientVersion:this.client._clientVersion,meta:c,batchRequestIdx:t.batchRequestIdx})}else{if(t.isPanic)throw new w.PrismaClientRustPanicError(l,this.client._clientVersion);if(t instanceof w.PrismaClientUnknownRequestError)throw new w.PrismaClientUnknownRequestError(l,{clientVersion:this.client._clientVersion,batchRequestIdx:t.batchRequestIdx});if(t instanceof w.PrismaClientInitializationError)throw new w.PrismaClientInitializationError(l,this.client._clientVersion);if(t instanceof w.PrismaClientRustPanicError)throw new w.PrismaClientRustPanicError(l,this.client._clientVersion)}throw t.clientVersion=this.client._clientVersion,t}sanitizeMessage(t){return this.client._errorFormat&&this.client._errorFormat!=="pretty"?Se(t):t}unpack(t,r,n){if(!t||(t.data&&(t=t.data),!t))return t;let i=Object.keys(t)[0],o=Object.values(t)[0],s=r.filter(c=>c!=="select"&&c!=="include"),a=un(o,s),l=i==="queryRaw"?$r(a):le(a);return n?n(l):l}get[Symbol.toStringTag](){return"RequestHandler"}};function Sd(e){if(e){if(e.kind==="batch")return{kind:"batch",options:{isolationLevel:e.isolationLevel}};if(e.kind==="itx")return{kind:"itx",options:el(e)};X(e,"Unknown transaction kind")}}function el(e){return{id:e.id,payload:e.payload}}function vd(e,t){return(0,Xa.hasBatchIndex)(e)&&t?.kind==="batch"&&e.batchRequestIdx!==t.index}function Cd(e){return e.code==="P2009"||e.code==="P2012"}function tl(e){if(e.kind==="Union")return{kind:"Union",errors:e.errors.map(tl)};if(Array.isArray(e.selectionPath)){let[,...t]=e.selectionPath;return{...e,selectionPath:t}}return e}var ii=Or;var sl=V(en());var v=class extends Error{constructor(t){super(t+`
     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ^
  70 | Read more at https://pris.ly/d/client-constructor`),this.name="PrismaClientConstructorValidationError"}get[Symbol.toStringTag](){return"PrismaClientConstructorValidationError"}};at(v,"PrismaClientConstructorValidationError");var rl=["errorFormat","adapter","accelerateUrl","log","transactionOptions","omit","comments","__internal"],nl=["pretty","colorless","minimal"],il=["info","query","warn","error"],Rd={adapter:()=>{},accelerateUrl:e=>{if(e!==void 0){if(typeof e!="string")throw new v(`Invalid value ${JSON.stringify(e)} for "accelerateUrl" provided to PrismaClient constructor.`);if(e.trim().length===0)throw new v('"accelerateUrl" provided to PrismaClient constructor must be a non-empty string.')}},errorFormat:e=>{if(e){if(typeof e!="string")throw new v(`Invalid value ${JSON.stringify(e)} for "errorFormat" provided to PrismaClient constructor.`);if(!nl.includes(e)){let t=Nt(e,nl);throw new v(`Invalid errorFormat ${e} provided to PrismaClient constructor.${t}`)}}},log:e=>{if(!e)return;if(!Array.isArray(e))throw new v(`Invalid value ${JSON.stringify(e)} for "log" provided to PrismaClient constructor.`);function t(r){if(typeof r=="string"&&!il.includes(r)){let n=Nt(r,il);throw new v(`Invalid log level "${r}" provided to PrismaClient constructor.${n}`)}}for(let r of e){t(r);let n={level:t,emit:i=>{let o=["stdout","event"];if(!o.includes(i)){let s=Nt(i,o);throw new v(`Invalid value ${JSON.stringify(i)} for "emit" in logLevel provided to PrismaClient constructor.${s}`)}}};if(r&&typeof r=="object")for(let[i,o]of Object.entries(r))if(n[i])n[i](o);else throw new v(`Invalid property ${i} for "log" provided to PrismaClient constructor`)}},transactionOptions:e=>{if(!e)return;let t=e.maxWait;if(t!=null&&t<=0)throw new v(`Invalid value ${t} for maxWait in "transactionOptions" provided to PrismaClient constructor. maxWait needs to be greater than 0`);let r=e.timeout;if(r!=null&&r<=0)throw new v(`Invalid value ${r} for timeout in "transactionOptions" provided to PrismaClient constructor. timeout needs to be greater than 0`)},omit:(e,t)=>{if(typeof e!="object")throw new v('"omit" option is expected to be an object.');if(e===null)throw new v('"omit" option can not be `null`');let r=[];for(let[n,i]of Object.entries(e)){let o=Id(n,t.runtimeDataModel);if(!o){r.push({kind:"UnknownModel",modelKey:n});continue}for(let[s,a]of Object.entries(i)){let l=o.fields.find(c=>c.name===s);if(!l){r.push({kind:"UnknownField",modelKey:n,fieldName:s});continue}if(l.relationName){r.push({kind:"RelationInOmit",modelKey:n,fieldName:s});continue}typeof a!="boolean"&&r.push({kind:"InvalidFieldValue",modelKey:n,fieldName:s})}}if(r.length>0)throw new v(Fd(e,r))},comments:e=>{if(e!==void 0){if(!Array.isArray(e))throw new v(`Invalid value ${JSON.stringify(e)} for "comments" provided to PrismaClient constructor. Expected an array of SQL commenter plugins.`);for(let t=0;t<e.length;t++)if(typeof e[t]!="function")throw new v(`Invalid value at index ${t} for "comments" provided to PrismaClient constructor. Each plugin must be a function.`)}},__internal:e=>{if(!e)return;let t=["debug","engine","configOverride"];if(typeof e!="object")throw new v(`Invalid value ${JSON.stringify(e)} for "__internal" to PrismaClient constructor`);for(let[r]of Object.entries(e))if(!t.includes(r)){let n=Nt(r,t);throw new v(`Invalid property ${JSON.stringify(r)} for "__internal" provided to PrismaClient constructor.${n}`)}}};function kd(e){let t=e.adapter!==void 0,r=e.accelerateUrl!==void 0;if(t&&r)throw new v('The "adapter" and "accelerateUrl" options are mutually exclusive. Please provide only one of them.');if(!t&&!r)throw new v('Using engine type "client" requires either "adapter" or "accelerateUrl" to be provided to PrismaClient constructor.')}function al(e,t){for(let[r,n]of Object.entries(e)){if(!rl.includes(r)){let i=Nt(r,rl);throw new v(`Unknown property ${r} provided to PrismaClient constructor.${i}`)}Rd[r](n,t)}kd(e)}function Nt(e,t){if(t.length===0||typeof e!="string")return"";let r=Od(e,t);return r?` Did you mean "${r}"?`:""}function Od(e,t){if(t.length===0)return null;let r=t.map(i=>({value:i,distance:(0,sl.default)(e,i)}));r.sort((i,o)=>i.distance<o.distance?-1:1);let n=r[0];return n.distance<3?n.value:null}function Id(e,t){return ol(t.models,e)??ol(t.types,e)}function ol(e,t){let r=Object.keys(e).find(n=>ie(n)===t);if(r)return e[r]}function Fd(e,t){let r=Ne(e);for(let o of t)switch(o.kind){case"UnknownModel":r.arguments.getField(o.modelKey)?.markAsError(),r.addErrorMessage(()=>`Unknown model name: ${o.modelKey}.`);break;case"UnknownField":r.arguments.getDeepField([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>`Model "${o.modelKey}" does not have a field named "${o.fieldName}".`);break;case"RelationInOmit":r.arguments.getDeepField([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>'Relations are already excluded by default and can not be specified in "omit".');break;case"InvalidFieldValue":r.arguments.getDeepFieldValue([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>"Omit field option value must be a boolean.");break}let{message:n,args:i}=er(r,"colorless");return`Error validating "omit" option:
  71 |
  72 | ${i} {
  code: 'P2002',
  meta: [Object],
  clientVersion: '7.2.0'
}
[SimpleUpload] Stack: PrismaClientKnownRequestError: 
Invalid `prisma.contentNode.create()` invocation:


Unique constraint failed on the fields: (`slug`)
    at qr.handleRequestError (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:6596:19)
    at qr.handleAndLogRequestError (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:6559:18)
    at qr.request (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:6540:18)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async a (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:7170:25)
    at async POST (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/apps_web_app_api_notes_content_upload_simple_route_ts_c48243fa._.js:151:27)
    at async AppRouteRouteModule.do (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:5:37789)
    at async AppRouteRouteModule.handle (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:5:45045)
    at async responseGenerator (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/d94bd_next_84d120ab._.js:15491:38)
    at async AppRouteRouteModule.handleResponse (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:1:187851)
    at async handleResponse (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/d94bd_next_84d120ab._.js:15553:32)
    at async handler (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/d94bd_next_84d120ab._.js:15606:13)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1413:9)
    at async DevServer.renderPageComponent (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1465:24)
    at async DevServer.renderToResponseImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1515:32)
    at async DevServer.pipeImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1021:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/next-server.js:394:17)
    at async DevServer.handleRequestImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:912:17)
    at async /Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/dev/next-dev-server.js:382:20
    at async Span.traceAsyncFn (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/trace/trace.js:157:20)
    at async DevServer.handleRequest (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/dev/next-dev-server.js:378:24)
    at async invokeRender (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/router-server.js:240:21)
    at async handleRequest (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/router-server.js:436:24)
    at async requestHandlerImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/router-server.js:484:13)
    at async Server.requestListener (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/start-server.js:226:13)
 POST /api/notes/content/upload/simple 500 in 985ms (compile: 1151µs, render: 984ms)
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."token", "public"."Session"."expiresAt", "public"."Session"."createdAt" FROM "public"."Session" WHERE ("public"."Session"."token" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."username", "public"."User"."email", "public"."User"."role"::text FROM "public"."User" WHERE "public"."User"."id" = $1 OFFSET $2
prisma:query SELECT "public"."StorageProviderConfig"."id", "public"."StorageProviderConfig"."userId", "public"."StorageProviderConfig"."provider"::text, "public"."StorageProviderConfig"."isDefault", "public"."StorageProviderConfig"."displayName", "public"."StorageProviderConfig"."config", "public"."StorageProviderConfig"."isActive", "public"."StorageProviderConfig"."createdAt", "public"."StorageProviderConfig"."updatedAt" FROM "public"."StorageProviderConfig" WHERE ("public"."StorageProviderConfig"."userId" = $1 AND "public"."StorageProviderConfig"."provider" = CAST($2::text AS "public"."StorageProvider") AND "public"."StorageProviderConfig"."isActive" = $3) ORDER BY "public"."StorageProviderConfig"."isDefault" DESC LIMIT $4 OFFSET $5
[Upload] File: test-notes.md, OCR: false, searchTextLength: 692
prisma:query SELECT "public"."FilePayload"."contentId", "public"."FilePayload"."fileName", "public"."FilePayload"."fileExtension", "public"."FilePayload"."mimeType", "public"."FilePayload"."fileSize", "public"."FilePayload"."checksum", "public"."FilePayload"."storageProvider"::text, "public"."FilePayload"."storageKey", "public"."FilePayload"."storageUrl", "public"."FilePayload"."storageMetadata", "public"."FilePayload"."uploadStatus"::text, "public"."FilePayload"."uploadedAt", "public"."FilePayload"."uploadError", "public"."FilePayload"."processingStatus", "public"."FilePayload"."isProcessed", "public"."FilePayload"."thumbnailUrl", "public"."FilePayload"."width", "public"."FilePayload"."height", "public"."FilePayload"."duration", "public"."FilePayload"."lastAccessedAt", "public"."FilePayload"."createdAt", "public"."FilePayload"."updatedAt", "public"."FilePayload"."searchText" FROM "public"."FilePayload" LEFT JOIN "public"."ContentNode" AS "j0" ON ("j0"."id") = ("public"."FilePayload"."contentId") WHERE ("public"."FilePayload"."checksum" = $1 AND "public"."FilePayload"."fileSize" = $2 AND ("j0"."ownerId" = $3 AND ("j0"."id" IS NOT NULL)) AND "public"."FilePayload"."uploadStatus" IN (CAST($4::text AS "public"."UploadStatus"),CAST($5::text AS "public"."UploadStatus"))) LIMIT $6 OFFSET $7
prisma:query SELECT "public"."ContentNode"."id", "public"."ContentNode"."ownerId", "public"."ContentNode"."title", "public"."ContentNode"."slug", "public"."ContentNode"."parentId", "public"."ContentNode"."displayOrder", "public"."ContentNode"."categoryId", "public"."ContentNode"."isPublished", "public"."ContentNode"."createdAt", "public"."ContentNode"."updatedAt", "public"."ContentNode"."deletedAt", "public"."ContentNode"."deletedBy", "public"."ContentNode"."customIcon", "public"."ContentNode"."iconColor" FROM "public"."ContentNode" WHERE "public"."ContentNode"."id" IN (NULL) OFFSET $1
prisma:query SELECT "public"."ContentNode"."id", "public"."ContentNode"."ownerId", "public"."ContentNode"."title", "public"."ContentNode"."slug", "public"."ContentNode"."parentId", "public"."ContentNode"."displayOrder", "public"."ContentNode"."categoryId", "public"."ContentNode"."isPublished", "public"."ContentNode"."createdAt", "public"."ContentNode"."updatedAt", "public"."ContentNode"."deletedAt", "public"."ContentNode"."deletedBy", "public"."ContentNode"."customIcon", "public"."ContentNode"."iconColor" FROM "public"."ContentNode" WHERE ("public"."ContentNode"."slug" = $1 AND "public"."ContentNode"."ownerId" = $2) LIMIT $3 OFFSET $4
prisma:query ROLLBACK
prisma:error 
Invalid `prisma.contentNode.create()` invocation:


Unique constraint failed on the fields: (`slug`)
[SimpleUpload] ERROR: Error [PrismaClientKnownRequestError]: 
Invalid `prisma.contentNode.create()` invocation:


Unique constraint failed on the fields: (`slug`)
    at qr.handleRequestError (lib/generated/prisma/runtime/client.js:69:8172)
    at qr.handleAndLogRequestError (lib/generated/prisma/runtime/client.js:69:7467)
    at qr.request (lib/generated/prisma/runtime/client.js:69:7174)
    at async a (lib/generated/prisma/runtime/client.js:79:5816)
    at async POST (app/api/notes/content/upload/simple/route.ts:146:19)
  67 |
  68 | More Information: https://pris.ly/d/execute-raw
> 69 | `)}var Xn=({clientMethod:e,activeProvider:t})=>r=>{let n="",i;if(ar(r))n=r.sql,i={values:Ge(r.values),__prismaRawParameters__:!0};else if(Array.isArray(r)){let[o,...s]=r;n=o,i={values:Ge(s||[]),__prismaRawParameters__:!0}}else switch(t){case"sqlite":case"mysql":{n=r.sql,i={values:Ge(r.values),__prismaRawParameters__:!0};break}case"cockroachdb":case"postgresql":case"postgres":{n=r.text,i={values:Ge(r.values),__prismaRawParameters__:!0};break}case"sqlserver":{n=Da(r),i={values:Ge(r.values),__prismaRawParameters__:!0};break}default:throw new Error(`The ${t} provider does not support ${e}`)}return i?.values?Va(`prisma.${e}(${n}, ${i.values})`):Va(`prisma.${e}(${n})`),{query:n,parameters:i}},ja={requestArgsToMiddlewareArgs(e){return[e.strings,...e.values]},middlewareArgsToRequestArgs(e){let[t,...r]=e;return new Ua.Sql(t,r)}},Ba={requestArgsToMiddlewareArgs(e){return[e]},middlewareArgsToRequestArgs(e){return e[0]}};function ei(e){return function(r,n){let i,o=(s=e)=>{try{return s===void 0||s?.kind==="itx"?i??=Qa(r(s)):Qa(r(s))}catch(a){return Promise.reject(a)}};return{get spec(){return n},then(s,a){return o().then(s,a)},catch(s){return o().catch(s)},finally(s){return o().finally(s)},requestTransaction(s){let a=o(s);return a.requestTransaction?a.requestTransaction(s):a},[Symbol.toStringTag]:"PrismaPromise"}}}function Qa(e){return typeof e.then=="function"?e:Promise.resolve(e)}var Ha={name:"@prisma/instrumentation-contract",version:"7.2.0",description:"Shared types and utilities for Prisma instrumentation",main:"dist/index.js",module:"dist/index.mjs",types:"dist/index.d.ts",exports:{".":{require:{types:"./dist/index.d.ts",default:"./dist/index.js"},import:{types:"./dist/index.d.mts",default:"./dist/index.mjs"}}},license:"Apache-2.0",homepage:"https://www.prisma.io",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/instrumentation-contract"},bugs:"https://github.com/prisma/prisma/issues",scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",prepublishOnly:"pnpm run build",test:"vitest run"},files:["dist"],sideEffects:!1,devDependencies:{"@opentelemetry/api":"1.9.0"},peerDependencies:{"@opentelemetry/api":"^1.8"}};var wd=Ha.version.split(".")[0],xd="PRISMA_INSTRUMENTATION",bd=`V${wd}_PRISMA_INSTRUMENTATION`,Ja=globalThis;function Wa(){let e=Ja[bd];return e?.helper?e.helper:Ja[xd]?.helper}var Ed={isEnabled(){return!1},getTraceParent(){return"00-10-10-00"},dispatchEngineSpans(){},getActiveContext(){},runInChildSpan(e,t){return t()}},ti=class{isEnabled(){return this.getTracingHelper().isEnabled()}getTraceParent(t){return this.getTracingHelper().getTraceParent(t)}dispatchEngineSpans(t){return this.getTracingHelper().dispatchEngineSpans(t)}getActiveContext(){return this.getTracingHelper().getActiveContext()}runInChildSpan(t,r){return this.getTracingHelper().runInChildSpan(t,r)}getTracingHelper(){return Wa()??Ed}};function Ga(){return new ti}function Ka(e,t=()=>{}){let r,n=new Promise(i=>r=i);return{then(i){return--e===0&&r(t()),i?.(n)}}}function za(e){return typeof e=="string"?e:e.reduce((t,r)=>{let n=typeof r=="string"?r:r.level;return n==="query"?t:t&&(r==="info"||t==="info")?"info":n},void 0)}var Xa=require("@prisma/client-runtime-utils");function Za(e){if(e.action!=="findUnique"&&e.action!=="findUniqueOrThrow")return;let t=[];return e.modelName&&t.push(e.modelName),e.query.arguments&&t.push(ri(e.query.arguments)),t.push(ri(e.query.selection)),t.join("")}function ri(e){return`(${Object.keys(e).sort().map(r=>{let n=e[r];return typeof n=="object"&&n!==null?`(${r} ${ri(n)})`:r}).join(" ")})`}var Td={aggregate:!1,aggregateRaw:!1,createMany:!0,createManyAndReturn:!0,createOne:!0,deleteMany:!0,deleteOne:!0,executeRaw:!0,findFirst:!1,findFirstOrThrow:!1,findMany:!1,findRaw:!1,findUnique:!1,findUniqueOrThrow:!1,groupBy:!1,queryRaw:!1,runCommandRaw:!0,updateMany:!0,updateManyAndReturn:!0,updateOne:!0,upsertOne:!0};function ni(e){return Td[e]}var Lr=class{constructor(t){this.options=t;this.batches={}}batches;tickActive=!1;request(t){let r=this.options.batchBy(t);return r?(this.batches[r]||(this.batches[r]=[],this.tickActive||(this.tickActive=!0,process.nextTick(()=>{this.dispatchBatches(),this.tickActive=!1}))),new Promise((n,i)=>{this.batches[r].push({request:t,resolve:n,reject:i})})):this.options.singleLoader(t)}dispatchBatches(){for(let t in this.batches){let r=this.batches[t];delete this.batches[t],r.length===1?this.options.singleLoader(r[0].request).then(n=>{n instanceof Error?r[0].reject(n):r[0].resolve(n)}).catch(n=>{r[0].reject(n)}):(r.sort((n,i)=>this.options.batchOrder(n.request,i.request)),this.options.batchLoader(r.map(n=>n.request)).then(n=>{if(n instanceof Error)for(let i=0;i<r.length;i++)r[i].reject(n);else for(let i=0;i<r.length;i++){let o=n[i];o instanceof Error?r[i].reject(o):r[i].resolve(o)}}).catch(n=>{for(let i=0;i<r.length;i++)r[i].reject(n)}))}}get[Symbol.toStringTag](){return"DataLoader"}};var Ya=require("@prisma/client-runtime-utils");function Te(e,t){if(t===null)return t;switch(e){case"bigint":return BigInt(t);case"bytes":{let{buffer:r,byteOffset:n,byteLength:i}=Buffer.from(t,"base64");return new Uint8Array(r,n,i)}case"decimal":return new Ya.Decimal(t);case"datetime":case"date":return new Date(t);case"time":return new Date(`1970-01-01T${t}Z`);case"bigint-array":return t.map(r=>Te("bigint",r));case"bytes-array":return t.map(r=>Te("bytes",r));case"decimal-array":return t.map(r=>Te("decimal",r));case"datetime-array":return t.map(r=>Te("datetime",r));case"date-array":return t.map(r=>Te("date",r));case"time-array":return t.map(r=>Te("time",r));default:return t}}function $r(e){let t=[],r=Pd(e);for(let n=0;n<e.rows.length;n++){let i=e.rows[n],o={...r};for(let s=0;s<i.length;s++)o[e.columns[s]]=Te(e.types[s],i[s]);t.push(o)}return t}function Pd(e){let t={};for(let r=0;r<e.columns.length;r++)t[e.columns[r]]=null;return t}var Ad=M("prisma:client:request_handler"),qr=class{client;dataloader;logEmitter;constructor(t,r){this.logEmitter=r,this.client=t,this.dataloader=new Lr({batchLoader:Vo(async({requests:n,customDataProxyFetch:i})=>{let{transaction:o,otelParentCtx:s}=n[0],a=n.map(p=>p.protocolQuery),l=this.client._tracingHelper.getTraceParent(s),c=n.some(p=>ni(p.protocolQuery.action));return(await this.client._engine.requestBatch(a,{traceparent:l,transaction:Sd(o),containsWrite:c,customDataProxyFetch:i})).map((p,y)=>{if(p instanceof Error)return p;try{return this.mapQueryEngineResult(n[y],p)}catch(h){return h}})}),singleLoader:async n=>{let i=n.transaction?.kind==="itx"?el(n.transaction):void 0,o=await this.client._engine.request(n.protocolQuery,{traceparent:this.client._tracingHelper.getTraceParent(),interactiveTransaction:i,isWrite:ni(n.protocolQuery.action),customDataProxyFetch:n.customDataProxyFetch});return this.mapQueryEngineResult(n,o)},batchBy:n=>n.transaction?.id?`transaction-${n.transaction.id}`:Za(n.protocolQuery),batchOrder(n,i){return n.transaction?.kind==="batch"&&i.transaction?.kind==="batch"?n.transaction.index-i.transaction.index:0}})}async request(t){try{return await this.dataloader.request(t)}catch(r){let{clientMethod:n,callsite:i,transaction:o,args:s,modelName:a}=t;this.handleAndLogRequestError({error:r,clientMethod:n,callsite:i,transaction:o,args:s,modelName:a,globalOmit:t.globalOmit})}}mapQueryEngineResult({dataPath:t,unpacker:r},n){let i=n?.data,o=this.unpack(i,t,r);return process.env.PRISMA_CLIENT_GET_TIME?{data:o}:o}handleAndLogRequestError(t){try{this.handleRequestError(t)}catch(r){throw this.logEmitter&&this.logEmitter.emit("error",{message:r.message,target:t.clientMethod,timestamp:new Date}),r}}handleRequestError({error:t,clientMethod:r,callsite:n,transaction:i,args:o,modelName:s,globalOmit:a}){if(Ad(t),vd(t,i))throw t;if(t instanceof w.PrismaClientKnownRequestError&&Cd(t)){let c=tl(t.meta);tr({args:o,errors:[c],callsite:n,errorFormat:this.client._errorFormat,originalMethod:r,clientVersion:this.client._clientVersion,globalOmit:a})}let l=t.message;if(n&&(l=Wt({callsite:n,originalMethod:r,isPanic:t.isPanic,showColors:this.client._errorFormat==="pretty",message:l})),l=this.sanitizeMessage(l),t.code){let c=s?{modelName:s,...t.meta}:t.meta;throw new w.PrismaClientKnownRequestError(l,{code:t.code,clientVersion:this.client._clientVersion,meta:c,batchRequestIdx:t.batchRequestIdx})}else{if(t.isPanic)throw new w.PrismaClientRustPanicError(l,this.client._clientVersion);if(t instanceof w.PrismaClientUnknownRequestError)throw new w.PrismaClientUnknownRequestError(l,{clientVersion:this.client._clientVersion,batchRequestIdx:t.batchRequestIdx});if(t instanceof w.PrismaClientInitializationError)throw new w.PrismaClientInitializationError(l,this.client._clientVersion);if(t instanceof w.PrismaClientRustPanicError)throw new w.PrismaClientRustPanicError(l,this.client._clientVersion)}throw t.clientVersion=this.client._clientVersion,t}sanitizeMessage(t){return this.client._errorFormat&&this.client._errorFormat!=="pretty"?Se(t):t}unpack(t,r,n){if(!t||(t.data&&(t=t.data),!t))return t;let i=Object.keys(t)[0],o=Object.values(t)[0],s=r.filter(c=>c!=="select"&&c!=="include"),a=un(o,s),l=i==="queryRaw"?$r(a):le(a);return n?n(l):l}get[Symbol.toStringTag](){return"RequestHandler"}};function Sd(e){if(e){if(e.kind==="batch")return{kind:"batch",options:{isolationLevel:e.isolationLevel}};if(e.kind==="itx")return{kind:"itx",options:el(e)};X(e,"Unknown transaction kind")}}function el(e){return{id:e.id,payload:e.payload}}function vd(e,t){return(0,Xa.hasBatchIndex)(e)&&t?.kind==="batch"&&e.batchRequestIdx!==t.index}function Cd(e){return e.code==="P2009"||e.code==="P2012"}function tl(e){if(e.kind==="Union")return{kind:"Union",errors:e.errors.map(tl)};if(Array.isArray(e.selectionPath)){let[,...t]=e.selectionPath;return{...e,selectionPath:t}}return e}var ii=Or;var sl=V(en());var v=class extends Error{constructor(t){super(t+`
     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ^
  70 | Read more at https://pris.ly/d/client-constructor`),this.name="PrismaClientConstructorValidationError"}get[Symbol.toStringTag](){return"PrismaClientConstructorValidationError"}};at(v,"PrismaClientConstructorValidationError");var rl=["errorFormat","adapter","accelerateUrl","log","transactionOptions","omit","comments","__internal"],nl=["pretty","colorless","minimal"],il=["info","query","warn","error"],Rd={adapter:()=>{},accelerateUrl:e=>{if(e!==void 0){if(typeof e!="string")throw new v(`Invalid value ${JSON.stringify(e)} for "accelerateUrl" provided to PrismaClient constructor.`);if(e.trim().length===0)throw new v('"accelerateUrl" provided to PrismaClient constructor must be a non-empty string.')}},errorFormat:e=>{if(e){if(typeof e!="string")throw new v(`Invalid value ${JSON.stringify(e)} for "errorFormat" provided to PrismaClient constructor.`);if(!nl.includes(e)){let t=Nt(e,nl);throw new v(`Invalid errorFormat ${e} provided to PrismaClient constructor.${t}`)}}},log:e=>{if(!e)return;if(!Array.isArray(e))throw new v(`Invalid value ${JSON.stringify(e)} for "log" provided to PrismaClient constructor.`);function t(r){if(typeof r=="string"&&!il.includes(r)){let n=Nt(r,il);throw new v(`Invalid log level "${r}" provided to PrismaClient constructor.${n}`)}}for(let r of e){t(r);let n={level:t,emit:i=>{let o=["stdout","event"];if(!o.includes(i)){let s=Nt(i,o);throw new v(`Invalid value ${JSON.stringify(i)} for "emit" in logLevel provided to PrismaClient constructor.${s}`)}}};if(r&&typeof r=="object")for(let[i,o]of Object.entries(r))if(n[i])n[i](o);else throw new v(`Invalid property ${i} for "log" provided to PrismaClient constructor`)}},transactionOptions:e=>{if(!e)return;let t=e.maxWait;if(t!=null&&t<=0)throw new v(`Invalid value ${t} for maxWait in "transactionOptions" provided to PrismaClient constructor. maxWait needs to be greater than 0`);let r=e.timeout;if(r!=null&&r<=0)throw new v(`Invalid value ${r} for timeout in "transactionOptions" provided to PrismaClient constructor. timeout needs to be greater than 0`)},omit:(e,t)=>{if(typeof e!="object")throw new v('"omit" option is expected to be an object.');if(e===null)throw new v('"omit" option can not be `null`');let r=[];for(let[n,i]of Object.entries(e)){let o=Id(n,t.runtimeDataModel);if(!o){r.push({kind:"UnknownModel",modelKey:n});continue}for(let[s,a]of Object.entries(i)){let l=o.fields.find(c=>c.name===s);if(!l){r.push({kind:"UnknownField",modelKey:n,fieldName:s});continue}if(l.relationName){r.push({kind:"RelationInOmit",modelKey:n,fieldName:s});continue}typeof a!="boolean"&&r.push({kind:"InvalidFieldValue",modelKey:n,fieldName:s})}}if(r.length>0)throw new v(Fd(e,r))},comments:e=>{if(e!==void 0){if(!Array.isArray(e))throw new v(`Invalid value ${JSON.stringify(e)} for "comments" provided to PrismaClient constructor. Expected an array of SQL commenter plugins.`);for(let t=0;t<e.length;t++)if(typeof e[t]!="function")throw new v(`Invalid value at index ${t} for "comments" provided to PrismaClient constructor. Each plugin must be a function.`)}},__internal:e=>{if(!e)return;let t=["debug","engine","configOverride"];if(typeof e!="object")throw new v(`Invalid value ${JSON.stringify(e)} for "__internal" to PrismaClient constructor`);for(let[r]of Object.entries(e))if(!t.includes(r)){let n=Nt(r,t);throw new v(`Invalid property ${JSON.stringify(r)} for "__internal" provided to PrismaClient constructor.${n}`)}}};function kd(e){let t=e.adapter!==void 0,r=e.accelerateUrl!==void 0;if(t&&r)throw new v('The "adapter" and "accelerateUrl" options are mutually exclusive. Please provide only one of them.');if(!t&&!r)throw new v('Using engine type "client" requires either "adapter" or "accelerateUrl" to be provided to PrismaClient constructor.')}function al(e,t){for(let[r,n]of Object.entries(e)){if(!rl.includes(r)){let i=Nt(r,rl);throw new v(`Unknown property ${r} provided to PrismaClient constructor.${i}`)}Rd[r](n,t)}kd(e)}function Nt(e,t){if(t.length===0||typeof e!="string")return"";let r=Od(e,t);return r?` Did you mean "${r}"?`:""}function Od(e,t){if(t.length===0)return null;let r=t.map(i=>({value:i,distance:(0,sl.default)(e,i)}));r.sort((i,o)=>i.distance<o.distance?-1:1);let n=r[0];return n.distance<3?n.value:null}function Id(e,t){return ol(t.models,e)??ol(t.types,e)}function ol(e,t){let r=Object.keys(e).find(n=>ie(n)===t);if(r)return e[r]}function Fd(e,t){let r=Ne(e);for(let o of t)switch(o.kind){case"UnknownModel":r.arguments.getField(o.modelKey)?.markAsError(),r.addErrorMessage(()=>`Unknown model name: ${o.modelKey}.`);break;case"UnknownField":r.arguments.getDeepField([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>`Model "${o.modelKey}" does not have a field named "${o.fieldName}".`);break;case"RelationInOmit":r.arguments.getDeepField([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>'Relations are already excluded by default and can not be specified in "omit".');break;case"InvalidFieldValue":r.arguments.getDeepFieldValue([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>"Omit field option value must be a boolean.");break}let{message:n,args:i}=er(r,"colorless");return`Error validating "omit" option:
  71 |
  72 | ${i} {
  code: 'P2002',
  meta: [Object],
  clientVersion: '7.2.0'
}
[SimpleUpload] Stack: PrismaClientKnownRequestError: 
Invalid `prisma.contentNode.create()` invocation:


Unique constraint failed on the fields: (`slug`)
    at qr.handleRequestError (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:6596:19)
    at qr.handleAndLogRequestError (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:6559:18)
    at qr.request (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:6540:18)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async a (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:7170:25)
    at async POST (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/apps_web_app_api_notes_content_upload_simple_route_ts_c48243fa._.js:151:27)
    at async AppRouteRouteModule.do (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:5:37789)
    at async AppRouteRouteModule.handle (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:5:45045)
    at async responseGenerator (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/d94bd_next_84d120ab._.js:15491:38)
    at async AppRouteRouteModule.handleResponse (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:1:187851)
    at async handleResponse (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/d94bd_next_84d120ab._.js:15553:32)
    at async handler (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/d94bd_next_84d120ab._.js:15606:13)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1413:9)
    at async DevServer.renderPageComponent (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1465:24)
    at async DevServer.renderToResponseImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1515:32)
    at async DevServer.pipeImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1021:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/next-server.js:394:17)
    at async DevServer.handleRequestImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:912:17)
    at async /Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/dev/next-dev-server.js:382:20
    at async Span.traceAsyncFn (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/trace/trace.js:157:20)
    at async DevServer.handleRequest (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/dev/next-dev-server.js:378:24)
    at async invokeRender (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/router-server.js:240:21)
    at async handleRequest (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/router-server.js:436:24)
    at async requestHandlerImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/router-server.js:484:13)
    at async Server.requestListener (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/start-server.js:226:13)
 POST /api/notes/content/upload/simple 500 in 1082ms (compile: 946µs, render: 1081ms)
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."token", "public"."Session"."expiresAt", "public"."Session"."createdAt" FROM "public"."Session" WHERE ("public"."Session"."token" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."username", "public"."User"."email", "public"."User"."role"::text FROM "public"."User" WHERE "public"."User"."id" = $1 OFFSET $2
prisma:query SELECT "public"."StorageProviderConfig"."id", "public"."StorageProviderConfig"."userId", "public"."StorageProviderConfig"."provider"::text, "public"."StorageProviderConfig"."isDefault", "public"."StorageProviderConfig"."displayName", "public"."StorageProviderConfig"."config", "public"."StorageProviderConfig"."isActive", "public"."StorageProviderConfig"."createdAt", "public"."StorageProviderConfig"."updatedAt" FROM "public"."StorageProviderConfig" WHERE ("public"."StorageProviderConfig"."userId" = $1 AND "public"."StorageProviderConfig"."provider" = CAST($2::text AS "public"."StorageProvider") AND "public"."StorageProviderConfig"."isActive" = $3) ORDER BY "public"."StorageProviderConfig"."isDefault" DESC LIMIT $4 OFFSET $5
[Upload] File: export.docx, OCR: false, searchTextLength: 4152
prisma:query SELECT "public"."FilePayload"."contentId", "public"."FilePayload"."fileName", "public"."FilePayload"."fileExtension", "public"."FilePayload"."mimeType", "public"."FilePayload"."fileSize", "public"."FilePayload"."checksum", "public"."FilePayload"."storageProvider"::text, "public"."FilePayload"."storageKey", "public"."FilePayload"."storageUrl", "public"."FilePayload"."storageMetadata", "public"."FilePayload"."uploadStatus"::text, "public"."FilePayload"."uploadedAt", "public"."FilePayload"."uploadError", "public"."FilePayload"."processingStatus", "public"."FilePayload"."isProcessed", "public"."FilePayload"."thumbnailUrl", "public"."FilePayload"."width", "public"."FilePayload"."height", "public"."FilePayload"."duration", "public"."FilePayload"."lastAccessedAt", "public"."FilePayload"."createdAt", "public"."FilePayload"."updatedAt", "public"."FilePayload"."searchText" FROM "public"."FilePayload" LEFT JOIN "public"."ContentNode" AS "j0" ON ("j0"."id") = ("public"."FilePayload"."contentId") WHERE ("public"."FilePayload"."checksum" = $1 AND "public"."FilePayload"."fileSize" = $2 AND ("j0"."ownerId" = $3 AND ("j0"."id" IS NOT NULL)) AND "public"."FilePayload"."uploadStatus" IN (CAST($4::text AS "public"."UploadStatus"),CAST($5::text AS "public"."UploadStatus"))) LIMIT $6 OFFSET $7
prisma:query SELECT "public"."ContentNode"."id", "public"."ContentNode"."ownerId", "public"."ContentNode"."title", "public"."ContentNode"."slug", "public"."ContentNode"."parentId", "public"."ContentNode"."displayOrder", "public"."ContentNode"."categoryId", "public"."ContentNode"."isPublished", "public"."ContentNode"."createdAt", "public"."ContentNode"."updatedAt", "public"."ContentNode"."deletedAt", "public"."ContentNode"."deletedBy", "public"."ContentNode"."customIcon", "public"."ContentNode"."iconColor" FROM "public"."ContentNode" WHERE "public"."ContentNode"."id" IN (NULL) OFFSET $1
prisma:query SELECT "public"."ContentNode"."id", "public"."ContentNode"."ownerId", "public"."ContentNode"."title", "public"."ContentNode"."slug", "public"."ContentNode"."parentId", "public"."ContentNode"."displayOrder", "public"."ContentNode"."categoryId", "public"."ContentNode"."isPublished", "public"."ContentNode"."createdAt", "public"."ContentNode"."updatedAt", "public"."ContentNode"."deletedAt", "public"."ContentNode"."deletedBy", "public"."ContentNode"."customIcon", "public"."ContentNode"."iconColor" FROM "public"."ContentNode" WHERE ("public"."ContentNode"."slug" = $1 AND "public"."ContentNode"."ownerId" = $2) LIMIT $3 OFFSET $4
prisma:query ROLLBACK
prisma:error 
Invalid `prisma.contentNode.create()` invocation:


Unique constraint failed on the fields: (`slug`)
[SimpleUpload] ERROR: Error [PrismaClientKnownRequestError]: 
Invalid `prisma.contentNode.create()` invocation:


Unique constraint failed on the fields: (`slug`)
    at qr.handleRequestError (lib/generated/prisma/runtime/client.js:69:8172)
    at qr.handleAndLogRequestError (lib/generated/prisma/runtime/client.js:69:7467)
    at qr.request (lib/generated/prisma/runtime/client.js:69:7174)
    at async a (lib/generated/prisma/runtime/client.js:79:5816)
    at async POST (app/api/notes/content/upload/simple/route.ts:146:19)
  67 |
  68 | More Information: https://pris.ly/d/execute-raw
> 69 | `)}var Xn=({clientMethod:e,activeProvider:t})=>r=>{let n="",i;if(ar(r))n=r.sql,i={values:Ge(r.values),__prismaRawParameters__:!0};else if(Array.isArray(r)){let[o,...s]=r;n=o,i={values:Ge(s||[]),__prismaRawParameters__:!0}}else switch(t){case"sqlite":case"mysql":{n=r.sql,i={values:Ge(r.values),__prismaRawParameters__:!0};break}case"cockroachdb":case"postgresql":case"postgres":{n=r.text,i={values:Ge(r.values),__prismaRawParameters__:!0};break}case"sqlserver":{n=Da(r),i={values:Ge(r.values),__prismaRawParameters__:!0};break}default:throw new Error(`The ${t} provider does not support ${e}`)}return i?.values?Va(`prisma.${e}(${n}, ${i.values})`):Va(`prisma.${e}(${n})`),{query:n,parameters:i}},ja={requestArgsToMiddlewareArgs(e){return[e.strings,...e.values]},middlewareArgsToRequestArgs(e){let[t,...r]=e;return new Ua.Sql(t,r)}},Ba={requestArgsToMiddlewareArgs(e){return[e]},middlewareArgsToRequestArgs(e){return e[0]}};function ei(e){return function(r,n){let i,o=(s=e)=>{try{return s===void 0||s?.kind==="itx"?i??=Qa(r(s)):Qa(r(s))}catch(a){return Promise.reject(a)}};return{get spec(){return n},then(s,a){return o().then(s,a)},catch(s){return o().catch(s)},finally(s){return o().finally(s)},requestTransaction(s){let a=o(s);return a.requestTransaction?a.requestTransaction(s):a},[Symbol.toStringTag]:"PrismaPromise"}}}function Qa(e){return typeof e.then=="function"?e:Promise.resolve(e)}var Ha={name:"@prisma/instrumentation-contract",version:"7.2.0",description:"Shared types and utilities for Prisma instrumentation",main:"dist/index.js",module:"dist/index.mjs",types:"dist/index.d.ts",exports:{".":{require:{types:"./dist/index.d.ts",default:"./dist/index.js"},import:{types:"./dist/index.d.mts",default:"./dist/index.mjs"}}},license:"Apache-2.0",homepage:"https://www.prisma.io",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/instrumentation-contract"},bugs:"https://github.com/prisma/prisma/issues",scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",prepublishOnly:"pnpm run build",test:"vitest run"},files:["dist"],sideEffects:!1,devDependencies:{"@opentelemetry/api":"1.9.0"},peerDependencies:{"@opentelemetry/api":"^1.8"}};var wd=Ha.version.split(".")[0],xd="PRISMA_INSTRUMENTATION",bd=`V${wd}_PRISMA_INSTRUMENTATION`,Ja=globalThis;function Wa(){let e=Ja[bd];return e?.helper?e.helper:Ja[xd]?.helper}var Ed={isEnabled(){return!1},getTraceParent(){return"00-10-10-00"},dispatchEngineSpans(){},getActiveContext(){},runInChildSpan(e,t){return t()}},ti=class{isEnabled(){return this.getTracingHelper().isEnabled()}getTraceParent(t){return this.getTracingHelper().getTraceParent(t)}dispatchEngineSpans(t){return this.getTracingHelper().dispatchEngineSpans(t)}getActiveContext(){return this.getTracingHelper().getActiveContext()}runInChildSpan(t,r){return this.getTracingHelper().runInChildSpan(t,r)}getTracingHelper(){return Wa()??Ed}};function Ga(){return new ti}function Ka(e,t=()=>{}){let r,n=new Promise(i=>r=i);return{then(i){return--e===0&&r(t()),i?.(n)}}}function za(e){return typeof e=="string"?e:e.reduce((t,r)=>{let n=typeof r=="string"?r:r.level;return n==="query"?t:t&&(r==="info"||t==="info")?"info":n},void 0)}var Xa=require("@prisma/client-runtime-utils");function Za(e){if(e.action!=="findUnique"&&e.action!=="findUniqueOrThrow")return;let t=[];return e.modelName&&t.push(e.modelName),e.query.arguments&&t.push(ri(e.query.arguments)),t.push(ri(e.query.selection)),t.join("")}function ri(e){return`(${Object.keys(e).sort().map(r=>{let n=e[r];return typeof n=="object"&&n!==null?`(${r} ${ri(n)})`:r}).join(" ")})`}var Td={aggregate:!1,aggregateRaw:!1,createMany:!0,createManyAndReturn:!0,createOne:!0,deleteMany:!0,deleteOne:!0,executeRaw:!0,findFirst:!1,findFirstOrThrow:!1,findMany:!1,findRaw:!1,findUnique:!1,findUniqueOrThrow:!1,groupBy:!1,queryRaw:!1,runCommandRaw:!0,updateMany:!0,updateManyAndReturn:!0,updateOne:!0,upsertOne:!0};function ni(e){return Td[e]}var Lr=class{constructor(t){this.options=t;this.batches={}}batches;tickActive=!1;request(t){let r=this.options.batchBy(t);return r?(this.batches[r]||(this.batches[r]=[],this.tickActive||(this.tickActive=!0,process.nextTick(()=>{this.dispatchBatches(),this.tickActive=!1}))),new Promise((n,i)=>{this.batches[r].push({request:t,resolve:n,reject:i})})):this.options.singleLoader(t)}dispatchBatches(){for(let t in this.batches){let r=this.batches[t];delete this.batches[t],r.length===1?this.options.singleLoader(r[0].request).then(n=>{n instanceof Error?r[0].reject(n):r[0].resolve(n)}).catch(n=>{r[0].reject(n)}):(r.sort((n,i)=>this.options.batchOrder(n.request,i.request)),this.options.batchLoader(r.map(n=>n.request)).then(n=>{if(n instanceof Error)for(let i=0;i<r.length;i++)r[i].reject(n);else for(let i=0;i<r.length;i++){let o=n[i];o instanceof Error?r[i].reject(o):r[i].resolve(o)}}).catch(n=>{for(let i=0;i<r.length;i++)r[i].reject(n)}))}}get[Symbol.toStringTag](){return"DataLoader"}};var Ya=require("@prisma/client-runtime-utils");function Te(e,t){if(t===null)return t;switch(e){case"bigint":return BigInt(t);case"bytes":{let{buffer:r,byteOffset:n,byteLength:i}=Buffer.from(t,"base64");return new Uint8Array(r,n,i)}case"decimal":return new Ya.Decimal(t);case"datetime":case"date":return new Date(t);case"time":return new Date(`1970-01-01T${t}Z`);case"bigint-array":return t.map(r=>Te("bigint",r));case"bytes-array":return t.map(r=>Te("bytes",r));case"decimal-array":return t.map(r=>Te("decimal",r));case"datetime-array":return t.map(r=>Te("datetime",r));case"date-array":return t.map(r=>Te("date",r));case"time-array":return t.map(r=>Te("time",r));default:return t}}function $r(e){let t=[],r=Pd(e);for(let n=0;n<e.rows.length;n++){let i=e.rows[n],o={...r};for(let s=0;s<i.length;s++)o[e.columns[s]]=Te(e.types[s],i[s]);t.push(o)}return t}function Pd(e){let t={};for(let r=0;r<e.columns.length;r++)t[e.columns[r]]=null;return t}var Ad=M("prisma:client:request_handler"),qr=class{client;dataloader;logEmitter;constructor(t,r){this.logEmitter=r,this.client=t,this.dataloader=new Lr({batchLoader:Vo(async({requests:n,customDataProxyFetch:i})=>{let{transaction:o,otelParentCtx:s}=n[0],a=n.map(p=>p.protocolQuery),l=this.client._tracingHelper.getTraceParent(s),c=n.some(p=>ni(p.protocolQuery.action));return(await this.client._engine.requestBatch(a,{traceparent:l,transaction:Sd(o),containsWrite:c,customDataProxyFetch:i})).map((p,y)=>{if(p instanceof Error)return p;try{return this.mapQueryEngineResult(n[y],p)}catch(h){return h}})}),singleLoader:async n=>{let i=n.transaction?.kind==="itx"?el(n.transaction):void 0,o=await this.client._engine.request(n.protocolQuery,{traceparent:this.client._tracingHelper.getTraceParent(),interactiveTransaction:i,isWrite:ni(n.protocolQuery.action),customDataProxyFetch:n.customDataProxyFetch});return this.mapQueryEngineResult(n,o)},batchBy:n=>n.transaction?.id?`transaction-${n.transaction.id}`:Za(n.protocolQuery),batchOrder(n,i){return n.transaction?.kind==="batch"&&i.transaction?.kind==="batch"?n.transaction.index-i.transaction.index:0}})}async request(t){try{return await this.dataloader.request(t)}catch(r){let{clientMethod:n,callsite:i,transaction:o,args:s,modelName:a}=t;this.handleAndLogRequestError({error:r,clientMethod:n,callsite:i,transaction:o,args:s,modelName:a,globalOmit:t.globalOmit})}}mapQueryEngineResult({dataPath:t,unpacker:r},n){let i=n?.data,o=this.unpack(i,t,r);return process.env.PRISMA_CLIENT_GET_TIME?{data:o}:o}handleAndLogRequestError(t){try{this.handleRequestError(t)}catch(r){throw this.logEmitter&&this.logEmitter.emit("error",{message:r.message,target:t.clientMethod,timestamp:new Date}),r}}handleRequestError({error:t,clientMethod:r,callsite:n,transaction:i,args:o,modelName:s,globalOmit:a}){if(Ad(t),vd(t,i))throw t;if(t instanceof w.PrismaClientKnownRequestError&&Cd(t)){let c=tl(t.meta);tr({args:o,errors:[c],callsite:n,errorFormat:this.client._errorFormat,originalMethod:r,clientVersion:this.client._clientVersion,globalOmit:a})}let l=t.message;if(n&&(l=Wt({callsite:n,originalMethod:r,isPanic:t.isPanic,showColors:this.client._errorFormat==="pretty",message:l})),l=this.sanitizeMessage(l),t.code){let c=s?{modelName:s,...t.meta}:t.meta;throw new w.PrismaClientKnownRequestError(l,{code:t.code,clientVersion:this.client._clientVersion,meta:c,batchRequestIdx:t.batchRequestIdx})}else{if(t.isPanic)throw new w.PrismaClientRustPanicError(l,this.client._clientVersion);if(t instanceof w.PrismaClientUnknownRequestError)throw new w.PrismaClientUnknownRequestError(l,{clientVersion:this.client._clientVersion,batchRequestIdx:t.batchRequestIdx});if(t instanceof w.PrismaClientInitializationError)throw new w.PrismaClientInitializationError(l,this.client._clientVersion);if(t instanceof w.PrismaClientRustPanicError)throw new w.PrismaClientRustPanicError(l,this.client._clientVersion)}throw t.clientVersion=this.client._clientVersion,t}sanitizeMessage(t){return this.client._errorFormat&&this.client._errorFormat!=="pretty"?Se(t):t}unpack(t,r,n){if(!t||(t.data&&(t=t.data),!t))return t;let i=Object.keys(t)[0],o=Object.values(t)[0],s=r.filter(c=>c!=="select"&&c!=="include"),a=un(o,s),l=i==="queryRaw"?$r(a):le(a);return n?n(l):l}get[Symbol.toStringTag](){return"RequestHandler"}};function Sd(e){if(e){if(e.kind==="batch")return{kind:"batch",options:{isolationLevel:e.isolationLevel}};if(e.kind==="itx")return{kind:"itx",options:el(e)};X(e,"Unknown transaction kind")}}function el(e){return{id:e.id,payload:e.payload}}function vd(e,t){return(0,Xa.hasBatchIndex)(e)&&t?.kind==="batch"&&e.batchRequestIdx!==t.index}function Cd(e){return e.code==="P2009"||e.code==="P2012"}function tl(e){if(e.kind==="Union")return{kind:"Union",errors:e.errors.map(tl)};if(Array.isArray(e.selectionPath)){let[,...t]=e.selectionPath;return{...e,selectionPath:t}}return e}var ii=Or;var sl=V(en());var v=class extends Error{constructor(t){super(t+`
     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ^
  70 | Read more at https://pris.ly/d/client-constructor`),this.name="PrismaClientConstructorValidationError"}get[Symbol.toStringTag](){return"PrismaClientConstructorValidationError"}};at(v,"PrismaClientConstructorValidationError");var rl=["errorFormat","adapter","accelerateUrl","log","transactionOptions","omit","comments","__internal"],nl=["pretty","colorless","minimal"],il=["info","query","warn","error"],Rd={adapter:()=>{},accelerateUrl:e=>{if(e!==void 0){if(typeof e!="string")throw new v(`Invalid value ${JSON.stringify(e)} for "accelerateUrl" provided to PrismaClient constructor.`);if(e.trim().length===0)throw new v('"accelerateUrl" provided to PrismaClient constructor must be a non-empty string.')}},errorFormat:e=>{if(e){if(typeof e!="string")throw new v(`Invalid value ${JSON.stringify(e)} for "errorFormat" provided to PrismaClient constructor.`);if(!nl.includes(e)){let t=Nt(e,nl);throw new v(`Invalid errorFormat ${e} provided to PrismaClient constructor.${t}`)}}},log:e=>{if(!e)return;if(!Array.isArray(e))throw new v(`Invalid value ${JSON.stringify(e)} for "log" provided to PrismaClient constructor.`);function t(r){if(typeof r=="string"&&!il.includes(r)){let n=Nt(r,il);throw new v(`Invalid log level "${r}" provided to PrismaClient constructor.${n}`)}}for(let r of e){t(r);let n={level:t,emit:i=>{let o=["stdout","event"];if(!o.includes(i)){let s=Nt(i,o);throw new v(`Invalid value ${JSON.stringify(i)} for "emit" in logLevel provided to PrismaClient constructor.${s}`)}}};if(r&&typeof r=="object")for(let[i,o]of Object.entries(r))if(n[i])n[i](o);else throw new v(`Invalid property ${i} for "log" provided to PrismaClient constructor`)}},transactionOptions:e=>{if(!e)return;let t=e.maxWait;if(t!=null&&t<=0)throw new v(`Invalid value ${t} for maxWait in "transactionOptions" provided to PrismaClient constructor. maxWait needs to be greater than 0`);let r=e.timeout;if(r!=null&&r<=0)throw new v(`Invalid value ${r} for timeout in "transactionOptions" provided to PrismaClient constructor. timeout needs to be greater than 0`)},omit:(e,t)=>{if(typeof e!="object")throw new v('"omit" option is expected to be an object.');if(e===null)throw new v('"omit" option can not be `null`');let r=[];for(let[n,i]of Object.entries(e)){let o=Id(n,t.runtimeDataModel);if(!o){r.push({kind:"UnknownModel",modelKey:n});continue}for(let[s,a]of Object.entries(i)){let l=o.fields.find(c=>c.name===s);if(!l){r.push({kind:"UnknownField",modelKey:n,fieldName:s});continue}if(l.relationName){r.push({kind:"RelationInOmit",modelKey:n,fieldName:s});continue}typeof a!="boolean"&&r.push({kind:"InvalidFieldValue",modelKey:n,fieldName:s})}}if(r.length>0)throw new v(Fd(e,r))},comments:e=>{if(e!==void 0){if(!Array.isArray(e))throw new v(`Invalid value ${JSON.stringify(e)} for "comments" provided to PrismaClient constructor. Expected an array of SQL commenter plugins.`);for(let t=0;t<e.length;t++)if(typeof e[t]!="function")throw new v(`Invalid value at index ${t} for "comments" provided to PrismaClient constructor. Each plugin must be a function.`)}},__internal:e=>{if(!e)return;let t=["debug","engine","configOverride"];if(typeof e!="object")throw new v(`Invalid value ${JSON.stringify(e)} for "__internal" to PrismaClient constructor`);for(let[r]of Object.entries(e))if(!t.includes(r)){let n=Nt(r,t);throw new v(`Invalid property ${JSON.stringify(r)} for "__internal" provided to PrismaClient constructor.${n}`)}}};function kd(e){let t=e.adapter!==void 0,r=e.accelerateUrl!==void 0;if(t&&r)throw new v('The "adapter" and "accelerateUrl" options are mutually exclusive. Please provide only one of them.');if(!t&&!r)throw new v('Using engine type "client" requires either "adapter" or "accelerateUrl" to be provided to PrismaClient constructor.')}function al(e,t){for(let[r,n]of Object.entries(e)){if(!rl.includes(r)){let i=Nt(r,rl);throw new v(`Unknown property ${r} provided to PrismaClient constructor.${i}`)}Rd[r](n,t)}kd(e)}function Nt(e,t){if(t.length===0||typeof e!="string")return"";let r=Od(e,t);return r?` Did you mean "${r}"?`:""}function Od(e,t){if(t.length===0)return null;let r=t.map(i=>({value:i,distance:(0,sl.default)(e,i)}));r.sort((i,o)=>i.distance<o.distance?-1:1);let n=r[0];return n.distance<3?n.value:null}function Id(e,t){return ol(t.models,e)??ol(t.types,e)}function ol(e,t){let r=Object.keys(e).find(n=>ie(n)===t);if(r)return e[r]}function Fd(e,t){let r=Ne(e);for(let o of t)switch(o.kind){case"UnknownModel":r.arguments.getField(o.modelKey)?.markAsError(),r.addErrorMessage(()=>`Unknown model name: ${o.modelKey}.`);break;case"UnknownField":r.arguments.getDeepField([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>`Model "${o.modelKey}" does not have a field named "${o.fieldName}".`);break;case"RelationInOmit":r.arguments.getDeepField([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>'Relations are already excluded by default and can not be specified in "omit".');break;case"InvalidFieldValue":r.arguments.getDeepFieldValue([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>"Omit field option value must be a boolean.");break}let{message:n,args:i}=er(r,"colorless");return`Error validating "omit" option:
  71 |
  72 | ${i} {
  code: 'P2002',
  meta: [Object],
  clientVersion: '7.2.0'
}
[SimpleUpload] Stack: PrismaClientKnownRequestError: 
Invalid `prisma.contentNode.create()` invocation:


Unique constraint failed on the fields: (`slug`)
    at qr.handleRequestError (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:6596:19)
    at qr.handleAndLogRequestError (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:6559:18)
    at qr.request (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:6540:18)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async a (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/ssr/apps_web_lib_generated_prisma_runtime_client_148ea4f1.js:7170:25)
    at async POST (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/apps_web_app_api_notes_content_upload_simple_route_ts_c48243fa._.js:151:27)
    at async AppRouteRouteModule.do (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:5:37789)
    at async AppRouteRouteModule.handle (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:5:45045)
    at async responseGenerator (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/d94bd_next_84d120ab._.js:15491:38)
    at async AppRouteRouteModule.handleResponse (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js:1:187851)
    at async handleResponse (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/d94bd_next_84d120ab._.js:15553:32)
    at async handler (/Users/davidvalentine/Documents/Digital-Garden/apps/web/.next/dev/server/chunks/d94bd_next_84d120ab._.js:15606:13)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1413:9)
    at async DevServer.renderPageComponent (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1465:24)
    at async DevServer.renderToResponseImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1515:32)
    at async DevServer.pipeImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:1021:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/next-server.js:394:17)
    at async DevServer.handleRequestImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/base-server.js:912:17)
    at async /Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/dev/next-dev-server.js:382:20
    at async Span.traceAsyncFn (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/trace/trace.js:157:20)
    at async DevServer.handleRequest (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/dev/next-dev-server.js:378:24)
    at async invokeRender (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/router-server.js:240:21)
    at async handleRequest (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/router-server.js:436:24)
    at async requestHandlerImpl (/Users/davidvalentine/Documents/Digital-Garden/node_modules/.pnpm/next@16.0.8_@babel+core@7.28.5_babel-plugin-react-compiler@1.0.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/next/dist/server/lib/router-server.js:484:13)
